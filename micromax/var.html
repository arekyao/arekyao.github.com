
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Micro-Max, 一个短小精干的棋类引擎（仅133行 ） - YY Every Day</title>
  <meta name="author" content="Arek.Yao">
  <link rel="author" href="humans.txt">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  
    
  
  <meta name="description" content="变量索引表 Variable Index 为了最小化 micro-Max的源代码的字符数，所有字符均采用1个字符变量名，这使得变量名无意义，无描述（这坑了多少童鞋啊）
In order to minimize the number of characters in the source code &hellip;">
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://arekyao.github.io/micromax/var.html">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="YY Every Day" type="application/atom+xml">
  <meta name="og:type" content="website" />
  <meta name="og:site_name" content="YY Every Day" />
  <meta name="og:title" content="Micro-Max, 一个短小精干的棋类引擎（仅133行 ）" />
  <meta name="og:description" content="变量索引表 Variable Index 为了最小化 micro-Max的源代码的字符数，所有字符均采用1个字符变量名，这使得变量名无意义，无描述（这坑了多少童鞋啊）
In order to minimize the number of characters in the source code &hellip;" />
  <meta name="og:url" content="http://arekyao.github.io/micromax/var.html"/>
  <meta name="url" content="http://arekyao.github.io/micromax/var.html">
  
  <meta name="distribution" content="global">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<nav role="navigation"><div class="navbar">
  <div class="navbar-inner">
    <a class="brand" href="/">YY Every Day</a>
    <ul class="nav">
      <li><a href="/">Home</a></li>
      <li><a href="/blog/archives">Archives</a></li>
      <li><a href="/tags.html">Tags</a></li>
      <li><a href="/categories.html">Categories</a></li>
      <li><a href="/micromax/index.html">micro-Max</a></li>
      <li><a href="/about/">AboutMe</a></li>
    </ul>
    <ul class="nav" data-subscription="rss">
      <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
      
    </ul>
      
    <form class="navbar-form" action="http://google.com/search" method="get">
      <fieldset role="search">
        <input type="hidden" name="q" value="site:arekyao.github.io" />
        <input class="span2" type="text" name="q" results="0" placeholder="Search"/>
      </fieldset>
    </form>
      
    
  </div>
</div>
</nav>
<div class="wrapper_single">
  <div class="container">
    <article class="span8 offset2 article-format" role="article">
      <div role="div">
        
        <header>
          <h1 class="entry-title">Micro-Max, 一个短小精干的棋类引擎（仅133行 ）</h1>
          
        </header>
        
        <h2 id="variable-index">变量索引表 Variable Index</h2>

<p>为了最小化 micro-Max的源代码的字符数，所有字符均采用1个字符变量名，这使得变量名无意义，无描述（这坑了多少童鞋啊）
In order to minimize the number of characters in the source code of micro-Max,<br />
all variables have one-character names, which makes the names rather non-descriptive. <br />
The following list with descriptions might therefore be helpful. <br />
Some names are used for different variables in main() and D(). <br />
A letter D or m in the second column of the table distinguishes the case. A space there indicates that this is a global (‘static’) variable. Most global variables are used to pass information from one instance of the recursive search routine D() to the next, or between that routine and the main program. To be visible to the routine that uses them, the corresponding names can then not be used for a local variables. This makes that we have nearly run out of one-letter names for use in D().</p>

<p>In the list below variables used in micro-Max 3.2 or 4.0 are printed in blue. Variables that are already reserved for future enhancements are given in orange.</p>

<h3 id="lower-case">Lower Case</h3>

<p>a  D *_      Pointer to hash-table entry for current position<br />
b    char[]  Chess board as 0x88 array, invalid squares contain piece-square table<br />
c  D<br />
   m char[]  In ‘main()’ this is the input buffer<br />
d  D int     Loop counter of iterative deepening, indicates depth<br />
e  D int     Argument to pass current (differentially updated) evaluation<br />
f  D char    Origin square of threat move<br />
g  D char    Target square of threat move<br />
h  D int     Temporay, used to calculate new remaining ply depth<br />
i  D int     Temporay, used to hold some evaluation terms<br />
j  D int     Loop counter for loop over directions<br />
   m int     General loop counter. In Max 4 seed to hash key #2<br />
k  D int     Argument to indicate side to move (8=white, 16=black)<br />
   m int     In ‘main()’ it also holds the side to move<br />
l  D int     Argument to pass upper window limit (beta)<br />
m  D int     Value of best move so far<br />
n    char[]  ASCII representation of pieces on board printout<br />
   D int     Argument to pass current (differentially updated) evaluation<br />
o    char[]  list of move vectors, index into this list, and initial-setup array<br />
p  D char    Type of piece doing the move under consideration<br />
   m *char   in ‘main()’ it is a pointer into the input buffer<br />
q  D int     Argument to pass lower window limit (alpha)<br />
r  D int     Step vector of current ray in move generation<br />
s  D<br />
t  D char    Piece to be captured by move under consideration<br />
u  D char    Piece doing the move under consideration<br />
v  D int     Temporay, used to hold some evaluation terms<br />
w    char[]  Relative value of pieces (Pawn = 1)<br />
x  D char    Origin square of move under consideration<br />
y  D char    Target square of move under consideration<br />
z  D int     Argument to pass target square of previous move  </p>

<h3 id="upper-case">Upper Case</h3>

<p>A    _[]     Hash table
B  D char    Start square of board scan for move generation
C    int     Constant 799 for conversion ASCII -&gt; square number, approx. value queen
D    int()   Recursive search routine <br />
E  D int     Argument to pass e.p. flag F<br />
F  D int     e.p. flag: square skipped over in double move of P or K<br />
G  D int     Corner square for castling, contains S = 0x80 on non-castling<br />
H  D char    Capture square, where captured piece stands<br />
I    int     Constant 8000 = ‘infinity’ score<br />
J  D int     Argument to pass hash key #1<br />
K    int     Origin square of input move<br />
L    int     Target square of input move<br />
M    int     Constant 0x88 = unused bits in valid square numbers<br />
N    int     Counter of searched nodes, for timing purposes<br />
O    char    Passes e.p. flag to next move at game level<br />
P  D int     Value of null move<br />
Q    int     Passes differentially updated evaluation score to next move<br />
R    char    Origin square of best move returned by ‘D()’<br />
S    int     Constant 0x80 = 128-bit (sign bit of char)<br />
T    char[]  Random numbers for hash key, really int, but packed as char<br />
U    MACRO<br />
V    int     Constant 0x70 = rank mask of 0x88 board<br />
W    char    Target square of best move returned by ‘D()’<br />
X  D char    Origin square of best move so far<br />
Y  D char    Target square of best move so far, marked with 128-bit as non-castling<br />
Z  D int     Argument to pass hash key #2<br />
_    struct  Name of structure for hash-table entry  </p>

<h3 id="macro-definitions">Macro Definitions</h3>

<p>F   Shorthand for for( ; ; )<br />
K   Access to packed random-number table T[piece][square] for hash key<br />
J   Differential update of hash key<br />
W   Shorthand for while( )<br />
U   Hash table size  </p>

<h3 id="structure-field-names">Structure Field Names</h3>

<p>_.D   char   Depth<br />
_.K   int    Hash Lock<br />
_.V   int    Value of position<br />
_.X   char   Move origin square, 8- and 128-bit encode score type (upper/lower bound)<br />
_.Y   char   Move target square, 128-bit indicates non-castling  </p>

        
      </div>
    
    </article>
  </div>
</div>
<div id="footer-widgets">
  <div class="container">
    <div class="row">
  <div class="span3">
    <h2>recent posts</h2>
    <ul class="recent_posts">
      
        <li>
          <a href="/blog/2013/10/11/setting-up-django-and-your-web-server-with-uwsgi-and-nginx/">Setting up Django and your web server with uWSGI and nginx</a>
        </li>
      
        <li>
          <a href="/blog/2013/10/09/how-to-add-tag-cloud-to-your-octopress-blog/">How to Add tag cloud to your Octopress blog</a>
        </li>
      
        <li>
          <a href="/blog/2013/10/02/workflow-engine-in-python/">Workflow Engine in Python</a>
        </li>
      
        <li>
          <a href="/blog/2013/09/09/how-to-add-category-list-to-you-octopress-blog/">How to Add Category list to you octopress blog</a>
        </li>
      
        <li>
          <a href="/blog/2013/08/09/how-to-change-your-octopress-blog-theme/">How to change your octopress blog theme</a>
        </li>
      
    </ul>
    <h2><a href="/blog/archives">archives</a></h2>
  </div>
  <div class="span3">
  </div>
  <div class="span3">
  </div>
  <div class="span3">
    <h2>hot tags</h2>
<ul class="tag-cloud">
    <li><a style="font-size: 106%" href="/tags/machinelearning/">MachineLearning</a></li>
<li><a style="font-size: 106%" href="/tags/baby/">baby</a></li>
<li><a style="font-size: 110%" href="/tags/blogger/">blogger</a></li>
<li><a style="font-size: 106%" href="/tags/life/">life</a></li>
<li><a style="font-size: 110%" href="/tags/octopress/">octopress</a></li>
<li><a style="font-size: 110%" href="/tags/python/">python</a></li>

</ul>

    <h2><a href="/tags.html">Tags</a></h2>
  </div>
</div>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F654cfc47b6302994615bbe58fa7d9a14' type='text/javascript'%3E%3C/script%3E"));
</script>



  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-left">
  <a href="/">YY Every Day</a>
  - Copyright &copy; 2013 - Arek.Yao
</p>
<p class="pull-right">
  <span>Powered by <a href="http://octopress.org/">Octopress</a>.</span>
  
    <span>Designed by <a href="http://www.AdrianArtiles.com">Adrian Artiles</a>.</span>
  
</p>

  </div>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script>window.jQuery || document.write('<script src="/javascripts/libs/jquery-1.7.2.min.js" type="text/javascript"><\/script>')</script>
<script src="/javascripts/libs/bootstrap.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.tweet.js" type="text/javascript"></script>
<script src="/javascripts/jquery.instagram.js" type="text/javascript"></script>
<script src="/javascripts/libs/jquery.masonry.min.js" type="text/javascript"></script>
<script src="/javascripts/custom.js" type="text/javascript"></script>


<script type="text/javascript">
      var disqus_shortname = 'arekyao';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




