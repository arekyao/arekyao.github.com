
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>YY Every Day</title>
  <meta name="author" content="Arek.Yao">

  
  <meta name="description" content="Workflow Engine in Python Oct 2nd, 2013 | Comments 1,What’s workflow A workflow consists of a sequence of connected steps where each step follows &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://arekyao.github.io/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="YY Every Day" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">


<!--JS for show math symbols -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">YY Every Day</a></h1>
  
    <h2>Never say never, because limits like fears, are often just an illusion.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:arekyao.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/micromax/index.html">Micro-Max</a></li>
  <li><a href="/about/index.html">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/02/workflow-engine-in-python/">Workflow Engine in Python</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-02T07:49:00+08:00" pubdate data-updated="true">Oct 2<span>nd</span>, 2013</time>
        
         | <a href="/blog/2013/10/02/workflow-engine-in-python/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="whats-workflow">1,What’s workflow</h2>

<p>A <a href="http://en.wikipedia.org/wiki/Workflow">workflow</a> consists of a sequence of connected steps where each step follows without delay or gap and ends just before the subsequent step may begin.</p>

<p>it’s just a complicated finite statemachine</p>

<h2 id="spiff-workflowhttpsgithubcomknipknapspiffworkflow">2,<a href="https://github.com/knipknap/SpiffWorkflow">Spiff workflow</a></h2>

<p>Spiff Workflow is a library implementing a framework for workflows.
It is based on http://www.workflowpatterns.com and implemented in pure Python.</p>

<p>In addition, Spiff Workflow provides a parser and workflow emulation
layer that can be used to create executable Spiff Workflow specifications
from Business Process Model and Notation (BPMN) documents.</p>

<p>For documentation please refer to:</p>

<p>https://github.com/knipknap/SpiffWorkflow/wiki</p>

<h2 id="how-to-make-spiff-workflow-work">3,How to make spiff workflow work</h2>

<p>There are many test cases in test directory, you would know how it works, at least know most parts.</p>

<p>Generally, it can work like this:</p>

<p>a, template ,which define the workflow based on <a href="http://www.workflowpatterns.com/">workflow pattern</a> <br />
b, tools  which can transform the template to real object in spiff object
c, engine, which is used to make spiff workflow object work like flow,lol</p>

<p>However,there is some trap in it.
you can make it work by function,complete_all() or complete_next()
but you can not know how the flow works by getting ready task,
the right way is by callback function</p>

<p>ps: i was stuck by this for two or three days.</p>

<h2 id="one-better-example-using-spiff-workflow">4, one better example using spiff workflow</h2>

<p>the case code </p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
<span class="line-number">107</span>
<span class="line-number">108</span>
<span class="line-number">109</span>
<span class="line-number">110</span>
<span class="line-number">111</span>
<span class="line-number">112</span>
<span class="line-number">113</span>
<span class="line-number">114</span>
<span class="line-number">115</span>
<span class="line-number">116</span>
<span class="line-number">117</span>
<span class="line-number">118</span>
<span class="line-number">119</span>
<span class="line-number">120</span>
<span class="line-number">121</span>
<span class="line-number">122</span>
<span class="line-number">123</span>
<span class="line-number">124</span>
<span class="line-number">125</span>
<span class="line-number">126</span>
<span class="line-number">127</span>
<span class="line-number">128</span>
<span class="line-number">129</span>
<span class="line-number">130</span>
<span class="line-number">131</span>
<span class="line-number">132</span>
<span class="line-number">133</span>
<span class="line-number">134</span>
<span class="line-number">135</span>
<span class="line-number">136</span>
<span class="line-number">137</span>
<span class="line-number">138</span>
<span class="line-number">139</span>
<span class="line-number">140</span>
<span class="line-number">141</span>
<span class="line-number">142</span>
<span class="line-number">143</span>
<span class="line-number">144</span>
<span class="line-number">145</span>
<span class="line-number">146</span>
<span class="line-number">147</span>
<span class="line-number">148</span>
<span class="line-number">149</span>
<span class="line-number">150</span>
<span class="line-number">151</span>
<span class="line-number">152</span>
<span class="line-number">153</span>
<span class="line-number">154</span>
<span class="line-number">155</span>
<span class="line-number">156</span>
<span class="line-number">157</span>
<span class="line-number">158</span>
<span class="line-number">159</span>
<span class="line-number">160</span>
<span class="line-number">161</span>
<span class="line-number">162</span>
<span class="line-number">163</span>
<span class="line-number">164</span>
</pre></td><td class="code"><pre><code class="py"><span class="line"><span class="c"># -*- coding: utf-8</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span>
</span><span class="line"><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span>  <span class="s">&#39;../../lib&#39;</span><span class="p">))</span>
</span><span class="line">
</span><span class="line"><span class="kn">from</span> <span class="nn">SpiffWorkflow.specs</span> <span class="kn">import</span> <span class="o">*</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">SpiffWorkflow</span> <span class="kn">import</span> <span class="n">Task</span><span class="p">,</span> <span class="n">Workflow</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">SpiffWorkflow.storage</span> <span class="kn">import</span> <span class="n">XmlSerializer</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">on_entered_cb</span><span class="p">(</span><span class="n">workflow</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">taken_path</span><span class="p">):</span>
</span><span class="line">    <span class="c">#print &quot;entered:&quot;,task.get_name()</span>
</span><span class="line">    <span class="k">return</span> <span class="bp">True</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">on_ready_cb</span><span class="p">(</span><span class="n">workflow</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">taken_path</span><span class="p">):</span>
</span><span class="line">    <span class="c">#print &quot;ready:&quot;,task.get_name()</span>
</span><span class="line">    <span class="k">return</span> <span class="bp">True</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">on_reached_cb</span><span class="p">(</span><span class="n">workflow</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">taken_path</span><span class="p">):</span>
</span><span class="line">    <span class="c">#print &quot;reached:&quot;,task.get_name()</span>
</span><span class="line">    <span class="k">return</span> <span class="bp">True</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">on_complete_cb</span><span class="p">(</span><span class="n">workflow</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">taken_path</span><span class="p">):</span>
</span><span class="line">    <span class="c"># Record the path.</span>
</span><span class="line">    <span class="k">print</span> <span class="s">&quot;complete:&quot;</span><span class="p">,</span><span class="n">task</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span>
</span><span class="line">    <span class="c">#print task.get_description()</span>
</span><span class="line">    <span class="n">indent</span> <span class="o">=</span> <span class="s">&#39;  &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">_get_depth</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span class="line">    <span class="n">taken_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indent</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">get_name</span><span class="p">()))</span>
</span><span class="line">    <span class="k">return</span> <span class="bp">True</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">class</span> <span class="nc">QuestionError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span class="line">    <span class="sd">&#39;&#39;&#39;  &#39;&#39;&#39;</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">class</span> <span class="nc">QuestionWorkflow</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span> <span class="o">=</span> <span class="n">XmlSerializer</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">set_up</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filename</span><span class="p">):</span>
</span><span class="line">        <span class="c"># Test patterns that are defined in XML format.</span>
</span><span class="line">        <span class="n">xml</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">wf_spec</span> <span class="o">=</span> <span class="n">WorkflowSpec</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">XmlSerializer</span><span class="p">(),</span> <span class="n">xml</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">taken_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_workflow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wf_spec</span><span class="p">)</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">workflow</span>   <span class="o">=</span> <span class="n">Workflow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wf_spec</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">UserSelection</span><span class="p">,</span> <span class="n">restart</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
</span><span class="line">
</span><span class="line">        <span class="k">if</span> <span class="n">restart</span><span class="p">:</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">workflow</span> <span class="o">=</span> <span class="n">Workflow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wf_spec</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="n">workflow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">workflow</span>
</span><span class="line">        <span class="n">condition_keys</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="line">        <span class="k">if</span> <span class="n">UserSelection</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
</span><span class="line">            <span class="n">UserSelection</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class="line">
</span><span class="line">        <span class="n">task_data_dict</span> <span class="o">=</span> <span class="n">UserSelection</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">        <span class="k">while</span> <span class="ow">not</span> <span class="n">workflow</span><span class="o">.</span><span class="n">is_completed</span><span class="p">():</span>
</span><span class="line">            <span class="n">tasks</span> <span class="o">=</span> <span class="n">workflow</span><span class="o">.</span><span class="n">get_tasks</span><span class="p">(</span><span class="n">Task</span><span class="o">.</span><span class="n">READY</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
</span><span class="line">                <span class="k">print</span> <span class="s">&quot;Ready:&quot;</span><span class="p">,</span> <span class="n">t</span><span class="o">.</span><span class="n">task_spec</span><span class="o">.</span><span class="n">name</span>
</span><span class="line">                <span class="k">if</span>  <span class="nb">hasattr</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">task_spec</span><span class="p">,</span> <span class="s">&quot;cond_task_specs&quot;</span><span class="p">):</span>
</span><span class="line">                    <span class="k">for</span> <span class="n">cond</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">task_spec</span><span class="o">.</span><span class="n">cond_task_specs</span><span class="p">:</span>
</span><span class="line">                        <span class="k">for</span> <span class="n">cond_unit</span> <span class="ow">in</span> <span class="n">cond</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
</span><span class="line">                            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cond_unit</span><span class="p">,</span> <span class="s">&quot;name&quot;</span><span class="p">):</span>
</span><span class="line">                                <span class="n">condition_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cond_unit</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">            <span class="n">flag_keys_in_user_select</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class="line">            <span class="k">for</span> <span class="n">cond_key</span> <span class="ow">in</span> <span class="n">condition_keys</span><span class="p">:</span>
</span><span class="line">                <span class="k">if</span> <span class="ow">not</span> <span class="n">task_data_dict</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">cond_key</span><span class="p">):</span>
</span><span class="line">                    <span class="k">print</span> <span class="n">cond_key</span>
</span><span class="line">                    <span class="n">flag_keys_in_user_select</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class="line">                    <span class="k">break</span>
</span><span class="line">
</span><span class="line">            <span class="k">if</span> <span class="ow">not</span> <span class="n">flag_keys_in_user_select</span><span class="p">:</span>
</span><span class="line">                <span class="c"># some tast&#39;s condition&#39;s key not in input userselect dict</span>
</span><span class="line">                <span class="k">return</span>
</span><span class="line">
</span><span class="line">            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
</span><span class="line">                <span class="n">t</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="o">**</span><span class="n">task_data_dict</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">            <span class="n">workflow</span><span class="o">.</span><span class="n">complete_next</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">        <span class="k">if</span> <span class="ow">not</span> <span class="n">workflow</span><span class="o">.</span><span class="n">is_completed</span><span class="p">():</span>
</span><span class="line">            <span class="k">raise</span> <span class="n">QuestionError</span><span class="p">(</span><span class="s">&#39;invalid feature[</span><span class="si">%s</span><span class="s">]&#39;</span> <span class="o">%</span> <span class="n">filename</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">print_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="n">path</span> <span class="o">=</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">taken_path</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span>
</span><span class="line">        <span class="n">info</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
</span><span class="line">        <span class="n">info</span> <span class="o">+=</span> <span class="s">&#39;the workflowrun path:</span><span class="se">\n</span><span class="s">&#39;</span>
</span><span class="line">        <span class="n">info</span> <span class="o">+=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="se">\n</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">path</span>
</span><span class="line">        <span class="k">print</span> <span class="n">info</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">track_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_spec</span><span class="p">,</span> <span class="n">taken_path</span><span class="p">):</span>
</span><span class="line">
</span><span class="line">        <span class="c">#reached event call back</span>
</span><span class="line">        <span class="k">if</span> <span class="n">task_spec</span><span class="o">.</span><span class="n">reached_event</span><span class="o">.</span><span class="n">is_connected</span><span class="p">(</span><span class="n">on_reached_cb</span><span class="p">):</span>
</span><span class="line">            <span class="n">task_spec</span><span class="o">.</span><span class="n">reached_event</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">on_reached_cb</span><span class="p">)</span>
</span><span class="line">        <span class="n">task_spec</span><span class="o">.</span><span class="n">reached_event</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">on_reached_cb</span><span class="p">,</span> <span class="n">taken_path</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="c">#completed event call back</span>
</span><span class="line">        <span class="k">if</span> <span class="n">task_spec</span><span class="o">.</span><span class="n">completed_event</span><span class="o">.</span><span class="n">is_connected</span><span class="p">(</span><span class="n">on_complete_cb</span><span class="p">):</span>
</span><span class="line">            <span class="n">task_spec</span><span class="o">.</span><span class="n">completed_event</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">on_complete_cb</span><span class="p">)</span>
</span><span class="line">        <span class="n">task_spec</span><span class="o">.</span><span class="n">completed_event</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">on_complete_cb</span><span class="p">,</span> <span class="n">taken_path</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="c">#enter event call back</span>
</span><span class="line">        <span class="k">if</span> <span class="n">task_spec</span><span class="o">.</span><span class="n">entered_event</span><span class="o">.</span><span class="n">is_connected</span><span class="p">(</span><span class="n">on_entered_cb</span><span class="p">):</span>
</span><span class="line">            <span class="n">task_spec</span><span class="o">.</span><span class="n">entered_event</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">on_entered_cb</span><span class="p">)</span>
</span><span class="line">        <span class="n">task_spec</span><span class="o">.</span><span class="n">entered_event</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">on_entered_cb</span><span class="p">,</span> <span class="n">taken_path</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">        <span class="c">#ready event call back</span>
</span><span class="line">        <span class="k">if</span> <span class="n">task_spec</span><span class="o">.</span><span class="n">ready_event</span><span class="o">.</span><span class="n">is_connected</span><span class="p">(</span><span class="n">on_ready_cb</span><span class="p">):</span>
</span><span class="line">            <span class="n">task_spec</span><span class="o">.</span><span class="n">ready_event</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">on_ready_cb</span><span class="p">)</span>
</span><span class="line">        <span class="n">task_spec</span><span class="o">.</span><span class="n">ready_event</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">on_ready_cb</span><span class="p">,</span> <span class="n">taken_path</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">track_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wf_spec</span><span class="p">,</span> <span class="n">taken_path</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
</span><span class="line">        <span class="k">if</span> <span class="n">taken_path</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
</span><span class="line">            <span class="n">taken_path</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="line">        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">wf_spec</span><span class="o">.</span><span class="n">task_specs</span><span class="p">:</span>
</span><span class="line">            <span class="c">#print &quot;track_workflow:&quot;,name</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">track_task</span><span class="p">(</span><span class="n">wf_spec</span><span class="o">.</span><span class="n">task_specs</span><span class="p">[</span><span class="n">name</span><span class="p">],</span> <span class="n">taken_path</span><span class="p">)</span>
</span><span class="line">        <span class="k">return</span> <span class="n">taken_path</span>
</span><span class="line">
</span><span class="line"><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class="line">    <span class="n">qw</span> <span class="o">=</span> <span class="n">QuestionWorkflow</span><span class="p">()</span>
</span><span class="line">    <span class="n">qw</span><span class="o">.</span><span class="n">set_up</span><span class="p">(</span><span class="s">&quot;./case.xml&quot;</span><span class="p">)</span>
</span><span class="line">    <span class="k">print</span> <span class="s">&quot;==========1st question==========&quot;</span>
</span><span class="line">    <span class="n">user_selct</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;man&#39;</span><span class="p">:</span><span class="s">&#39;1&#39;</span><span class="p">}</span>
</span><span class="line">    <span class="n">qw</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">user_selct</span><span class="p">)</span>
</span><span class="line">    <span class="k">print</span> <span class="s">&quot;==========2nd question==========&quot;</span>
</span><span class="line">    <span class="n">user_selct</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;man&#39;</span><span class="p">:</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;house&#39;</span><span class="p">:</span> <span class="s">&#39;2&#39;</span><span class="p">}</span>
</span><span class="line">    <span class="n">qw</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">user_selct</span><span class="p">)</span>
</span><span class="line">    <span class="k">print</span> <span class="s">&quot;==========3rd question==========&quot;</span>
</span><span class="line">    <span class="n">user_selct</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;man&#39;</span><span class="p">:</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;house&#39;</span><span class="p">:</span> <span class="s">&#39;2&#39;</span><span class="p">,</span> <span class="s">&#39;why&#39;</span><span class="p">:</span> <span class="s">&#39;because you are a hero&#39;</span><span class="p">}</span>
</span><span class="line">    <span class="n">qw</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">user_selct</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="sd">&#39;&#39;&#39;</span>
</span><span class="line"><span class="sd">    print &quot;==========4th question=========&quot;</span>
</span><span class="line"><span class="sd">    user_selct = {&#39;man&#39;:&#39;1&#39;, &#39;house&#39;: &#39;2&#39;, &#39;role&#39;:&#39;5&#39;}</span>
</span><span class="line"><span class="sd">    qw.run(user_selct)</span>
</span><span class="line"><span class="sd">    &#39;&#39;&#39;</span>
</span><span class="line">
</span><span class="line">    <span class="k">print</span> <span class="s">&quot;==========fix some question==========&quot;</span>
</span><span class="line">    <span class="n">user_selct</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;man&#39;</span><span class="p">:</span><span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;house&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">,</span> <span class="s">&#39;role&#39;</span><span class="p">:</span><span class="s">&#39;5&#39;</span><span class="p">}</span>
</span><span class="line">    <span class="n">qw</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">user_selct</span><span class="p">,</span><span class="bp">True</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="k">print</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>the template case.xml file</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
</pre></td><td class="code"><pre><code class="xml"><span class="line"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span class="line"><span class="nt">&lt;process-definition</span> <span class="na">name=</span><span class="s">&quot;Daixm Workflow&quot;</span> <span class="na">revision=</span><span class="s">&quot;1.6&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;description&gt;</span>
</span><span class="line">    A test workflow that contains all possible tasks.
</span><span class="line">    <span class="nt">&lt;/description&gt;</span>
</span><span class="line">
</span><span class="line">    <span class="c">&lt;!-- Start with an implicit simple split. --&gt;</span>
</span><span class="line">    <span class="nt">&lt;start-task&gt;</span>
</span><span class="line">        <span class="nt">&lt;successor&gt;</span>house_choice<span class="nt">&lt;/successor&gt;</span>
</span><span class="line">    <span class="nt">&lt;/start-task&gt;</span>
</span><span class="line">
</span><span class="line">    <span class="nt">&lt;exclusive-choice</span> <span class="na">name=</span><span class="s">&quot;house_choice&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="c">&lt;!-- No House --&gt;</span>
</span><span class="line">        <span class="nt">&lt;default-successor&gt;</span>role_choice<span class="nt">&lt;/default-successor&gt;</span>
</span><span class="line">
</span><span class="line">        <span class="nt">&lt;conditional-successor&gt;</span>
</span><span class="line">            <span class="nt">&lt;equals</span> <span class="na">left-field=</span><span class="s">&quot;house&quot;</span> <span class="na">right-value=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">            <span class="nt">&lt;successor&gt;</span>build_house<span class="nt">&lt;/successor&gt;</span>
</span><span class="line">        <span class="nt">&lt;/conditional-successor&gt;</span>
</span><span class="line">
</span><span class="line">        <span class="nt">&lt;conditional-successor&gt;</span>
</span><span class="line">            <span class="nt">&lt;equals</span> <span class="na">left-field=</span><span class="s">&quot;house&quot;</span> <span class="na">right-value=</span><span class="s">&quot;2&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">            <span class="nt">&lt;successor&gt;</span>buy_house<span class="nt">&lt;/successor&gt;</span>
</span><span class="line">        <span class="nt">&lt;/conditional-successor&gt;</span>
</span><span class="line">    <span class="nt">&lt;/exclusive-choice&gt;</span>
</span><span class="line">
</span><span class="line">    <span class="nt">&lt;task</span> <span class="na">name=</span><span class="s">&quot;buy_house&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;description&gt;</span><span class="nt">&lt;/description&gt;</span>
</span><span class="line">        <span class="nt">&lt;successor&gt;</span>house_location<span class="nt">&lt;/successor&gt;</span>
</span><span class="line">    <span class="nt">&lt;/task&gt;</span>
</span><span class="line">
</span><span class="line">    <span class="nt">&lt;task</span> <span class="na">name=</span><span class="s">&quot;house_location&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;successor&gt;</span>house_age<span class="nt">&lt;/successor&gt;</span>
</span><span class="line">    <span class="nt">&lt;/task&gt;</span>
</span><span class="line">
</span><span class="line">    <span class="nt">&lt;task</span> <span class="na">name=</span><span class="s">&quot;house_age&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;successor&gt;</span>role_choice<span class="nt">&lt;/successor&gt;</span>
</span><span class="line">    <span class="nt">&lt;/task&gt;</span>
</span><span class="line">
</span><span class="line">    <span class="nt">&lt;task</span> <span class="na">name=</span><span class="s">&quot;build_house&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;successor&gt;</span>role_choice<span class="nt">&lt;/successor&gt;</span>
</span><span class="line">    <span class="nt">&lt;/task&gt;</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">    <span class="nt">&lt;exclusive-choice</span> <span class="na">name=</span><span class="s">&quot;role_choice&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="c">&lt;!-- No House --&gt;</span>
</span><span class="line">        <span class="nt">&lt;default-successor&gt;</span>no_jobs<span class="nt">&lt;/default-successor&gt;</span>
</span><span class="line">        <span class="nt">&lt;conditional-successor&gt;</span>
</span><span class="line">            <span class="nt">&lt;equals</span> <span class="na">left-field=</span><span class="s">&quot;role&quot;</span> <span class="na">right-value=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">            <span class="nt">&lt;successor&gt;</span>jobs_working<span class="nt">&lt;/successor&gt;</span>
</span><span class="line">        <span class="nt">&lt;/conditional-successor&gt;</span>
</span><span class="line">    <span class="nt">&lt;/exclusive-choice&gt;</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">    <span class="nt">&lt;task</span> <span class="na">name=</span><span class="s">&quot;no_jobs&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;successor&gt;</span>last<span class="nt">&lt;/successor&gt;</span>
</span><span class="line">    <span class="nt">&lt;/task&gt;</span>
</span><span class="line">
</span><span class="line">    <span class="nt">&lt;task</span> <span class="na">name=</span><span class="s">&quot;jobs_working&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;successor&gt;</span>last<span class="nt">&lt;/successor&gt;</span>
</span><span class="line">    <span class="nt">&lt;/task&gt;</span>
</span><span class="line">
</span><span class="line">    <span class="c">&lt;!-- A final task. --&gt;</span>
</span><span class="line">    <span class="nt">&lt;task</span> <span class="na">name=</span><span class="s">&quot;last&quot;</span><span class="nt">&gt;</span>
</span><span class="line">        <span class="nt">&lt;successor&gt;</span>end<span class="nt">&lt;/successor&gt;</span>
</span><span class="line">    <span class="nt">&lt;/task&gt;</span>
</span><span class="line"><span class="nt">&lt;/process-definition&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

</div>
  
  

<br>
<a href="/blog/2013/10/02/workflow-engine-in-python/#disqus_thread">Comments</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/02/the-key-technologies-in-simple-xiangqi-engine-maxqi/">The Key Technologies in Simple XiangQi Engine MaxQi</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-02T08:30:00+08:00" pubdate data-updated="true">Jul 2<span>nd</span>, 2013</time>
        
         | <a href="/blog/2013/07/02/the-key-technologies-in-simple-xiangqi-engine-maxqi/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="mini-max-algorithm">1,mini-max algorithm</h2>

<p>minimize the opponent’s potential max profit.</p>

<p>easy to understand,right?</p>

<h2 id="alpha-beta-cutoff">2,alpha-beta cutoff</h2>

<p>It stops completely evaluating a move when at least one possibility has been found that proves the move to be worse than a previously examined move.  <br />
 Such moves need not be evaluated further. <br />
 When applied to a standard minimax tree, it returns the same move as minimax would, but prunes away branches that cannot possibly influence the final decision</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class=""><span class="line">function alphabeta(node, depth, a, b, Player)        
</span><span class="line">    if depth = 0 or node is a terminal node
</span><span class="line">        return the heuristic value of node
</span><span class="line">    if Player = MaxPlayer
</span><span class="line">        for each child of node
</span><span class="line">            a := max(a, alphabeta(child, depth-1, a, b, not(Player) ))    
</span><span class="line">            if b &lt;= a
</span><span class="line">                break                             (* Beta cut-off *)
</span><span class="line">        return a
</span><span class="line">    else
</span><span class="line">        for each child of node
</span><span class="line">            b := min(b, alphabeta(child, depth-1, a, b, not(Player) ))    
</span><span class="line">            if b &lt;= a
</span><span class="line">                break                             (* Alpha cut-off *)
</span><span class="line">        return b
</span><span class="line">(* Initial call *)
</span><span class="line">alphabeta(origin, depth, -infinity, +infinity, MaxPlayer)</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="quiescence-search">3,Quiescence search</h2>

<p>When have to recapture , it have to search until there is no tradeoff</p>

<h2 id="iterative-search">4,Iterative search</h2>

<p>the key is the search depth.</p>

<p>The efficiency of the alpha-beta search is strongly enhanced (in terms of the number of nodes searched) <br />
if the best move is tried first, and trying idiotic moves first (such as both Queens getting berserk) can easily lead to an explosion of the search.  </p>

<p>Rather than aggressively starting a search of the required depth, proceed carefully and first invest some time doing a search of shallower depth.  </p>

<p>What it can get ,through the shallower depth search , the window (alpha-beta,the min &amp; max) and the best move, which is supposed to search first in deepen search</p>

<h2 id="hash-table">5, Hash table</h2>

<p>Use the result which has been faced last time.</p>

<p>So it is needed some hash key to describe the whole board </p>

<p>The Zobrist Keys show up!</p>

<h2 id="zobrist-hashing">6,Zobrist hashing</h2>

<p>Zobrist hashing starts by randomly generating bitstrings for each possible element of a board game</p>

<p>The final Zobrist hash is computed by combining those bitstrings using bitwise XOR.</p>

<p>the good is the hash key is recalculated by two “xor”</p>

<h2 id="monte-carlo-methods">7,Monte Carlo methods</h2>

<p>This method can be used to estimate the board status(which side is at better thant the other side)</p>

<p>Monte Carlo methods vary, but tend to follow a particular pattern:</p>

<p>a). Define a domain of possible inputs.<br />
  b). Generate inputs randomly from a probability distribution over the domain.<br />
  c). Perform a deterministic computation on the inputs.<br />
  d). Aggregate the results.  </p>

<p>However, in maxqi, it’s not used.<br />
The other way the piece’s weight sum is used to estimate.</p>
</div>
  
  

<br>
<a href="/blog/2013/07/02/the-key-technologies-in-simple-xiangqi-engine-maxqi/#disqus_thread">Comments</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/23/something-about-chess-series-with-ai/">Something About Chess Series With AI</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-23T20:48:00+08:00" pubdate data-updated="true">Jun 23<span>rd</span>, 2013</time>
        
         | <a href="/blog/2013/06/23/something-about-chess-series-with-ai/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="preface">Preface</h2>
<p>One day, I want to learn some knowledge about the Game AI topic.
Chess series is supposed to a big collection in Game.
Xiangqi is my fav chess game, and I am familiar with it.
It’s a good choice.</p>

<p>Besides, six years ago, I have developed xiangqi program both in java &amp; C++.
I can use it to learn AI engine ,and the program developed before , can be seen as a GUI.
Techinically, it will be OK then.
Reality is cruel, the Java version is lost at home, and the C++ version have to run on Window, not my Mac OSX.</p>

<h2 id="chess--ai">Chess &amp; AI</h2>
<p><a href="http://www.chessvariants.org/d.chess/chess.html">Chess</a> is a two-player strategy board game played on a chessboard, a checkered gameboard with 64 squares arranged in an eight-by-eight grid. <br />
It is one of the world’s most popular games, played by millions of people worldwide at home, in clubs, online, by correspondence, and in tournaments.</p>

<p>So if chess has AI, then we can compete with Computer.  </p>

<p>More interestingly, we can let two Computer with AI fight with each other.</p>

<p>There are all kinds of chess game, which seems alike.</p>

<p>They have these Feature:
* board with X * Y
* pieces with some rule</p>

<p>Chess(International)
http://www.chessvariants.org/d.chess/chess.html</p>

<p>Xiangqi(Chinese Chess)
http://www.chessvariants.org/xiangqi.html</p>

<h2 id="xboard--fairymax">Xboard &amp; FairyMax</h2>
<p>Xboard is a chess program, FairyMax is a chess engine(AI)</p>

<p><a href="http://www.gnu.org/software/xboard/">Xboard</a> is a graphical user interface for chess in all its major forms, <br />
including international chess, xiangqi (Chinese chess), shogi (Japanese chess) and Makruk, <br />
in addition to many minor variants such as Losers Chess, Crazyhouse, Chess960 and Capablanca Chess.  </p>

<p><a href="http://home.hccnet.nl/h.g.muller/CVfairy.html">FairyMax</a>
FairyMax is developed by H.G.Muller, who is super fan of chess.
Maxqi is the xiangqi engine.</p>

<h2 id="learing">Learing</h2>

<h5 id="first--install-xboard--fairymax">First , install xboard &amp; Fairymax</h5>

<p>Here is a way:</p>

<p><a href="">https://github.com/Homebrew/homebrew-games</a></p>

<h5 id="second-problem-is-how-to-run-xboard">Second Problem is how to run xboard….</h5>

<p>Don’t underestimate it.
It takes me lots of time to test it.</p>

<p>Help information? xboard help?     It does not work <br />
The output is full of useless infomation</p>

<p>Xboard web help? User guide ? It does not work.<br />
http://www.gnu.org/software/xboard/user_guide/UserGuide.html</p>

<p>at last, I have to learn how to run, From an appication on Window..</p>

<p>OMG….</p>

<p>1, copy the xboard.ini to be used as xboard.rc</p>

<p>2, then I got the knowledge, the viariant arg…supposed to be the xiangqi</p>

<p>3, use fcp can call the maxqi. from user guide</p>

<p>now, it almost works but have a problem
xiangqi can compatible with maxqi engine</p>

<p>4, firstProtocolVersion is need.</p>

<p>ok,then you can run xboard</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">xboard -variant xiangqi -firstProtocolVersion 1 -fcp maxqi</span></code></pre></td></tr></table></div></figure></notextile></div>

<h5 id="review-the-maxqi-code">review the maxqi code</h5>
<p>Now the biggest problem,which I will face, is coming….</p>

<p>Why?</p>

<p>Becaure somebody want to program the engine with 1200 characters.</p>

<p>Here is the code, are you crazy? especially, the Function D()…..</p>

<p>I got the code little by little, and hesitate when D() function come to me…</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Function D</span><a href="http://fairymax.sourcearchive.com/documentation/4.8q-2/maxqi_8c_source.html">Source Article</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
</pre></td><td class="code"><pre><code class="c"><span class="line"><span class="n">D</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">q</span><span class="p">,</span><span class="n">l</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>          <span class="cm">/* recursive minimax search, k=moving side, n=depth*/</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">k</span><span class="p">,</span><span class="n">q</span><span class="p">,</span><span class="n">l</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">z</span><span class="p">,</span><span class="n">n</span><span class="p">;</span>        <span class="cm">/* (q,l)=window, e=current eval. score, E=e.p. sqr.*/</span>
</span><span class="line"><span class="p">{</span>                       <span class="cm">/* e=score, z=prev.dest; J,Z=hashkeys; return score*/</span>
</span><span class="line">    <span class="kt">int</span> <span class="n">j</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">v</span><span class="p">,</span><span class="n">d</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="n">P</span><span class="p">,</span><span class="n">V</span><span class="p">,</span><span class="n">f</span><span class="o">=</span><span class="n">J</span><span class="p">,</span><span class="n">g</span><span class="o">=</span><span class="n">Z</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">flag</span><span class="p">,</span><span class="n">F</span><span class="p">;</span>
</span><span class="line">    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">t</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">u</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">lu</span><span class="p">;</span>
</span><span class="line">    <span class="k">struct</span> <span class="n">_</span><span class="o">*</span><span class="n">a</span><span class="o">=</span><span class="n">A</span><span class="o">+</span><span class="p">(</span><span class="n">J</span><span class="o">+</span><span class="n">k</span><span class="o">&amp;</span><span class="n">U</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>                       <span class="cm">/* lookup pos. in hash table*/</span>
</span><span class="line">    <span class="n">q</span><span class="o">-=</span><span class="n">q</span><span class="o">&lt;</span><span class="n">e</span><span class="p">;</span><span class="n">l</span><span class="o">-=</span><span class="n">l</span><span class="o">&lt;=</span><span class="n">e</span><span class="p">;</span>                               <span class="cm">/* adj. window: delay bonus */</span>
</span><span class="line">    <span class="n">d</span><span class="o">=</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">D</span><span class="p">;</span><span class="n">m</span><span class="o">=</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">V</span><span class="p">;</span><span class="n">F</span><span class="o">=</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">F</span><span class="p">;</span>                         <span class="cm">/* resume at stored depth   */</span>
</span><span class="line">    <span class="n">X</span><span class="o">=</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">X</span><span class="p">;</span><span class="n">Y</span><span class="o">=</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">Y</span><span class="p">;</span>                                <span class="cm">/* start at best-move hint  */</span>
</span><span class="line">    <span class="k">if</span><span class="p">(</span><span class="n">z</span><span class="o">&amp;</span><span class="n">S</span><span class="o">&amp;&amp;</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">K</span><span class="o">==</span><span class="n">Z</span><span class="p">)</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;# root hit %d %d %x</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">D</span><span class="p">,</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">V</span><span class="p">,</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">F</span><span class="p">);</span>
</span><span class="line">    <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">K</span><span class="o">-</span><span class="n">Z</span><span class="o">|</span><span class="n">z</span><span class="o">&amp;</span><span class="n">S</span>  <span class="o">|</span>                              <span class="cm">/* miss: other pos. or empty*/</span>
</span><span class="line">            <span class="o">!</span><span class="p">(</span><span class="n">m</span><span class="o">&lt;=</span><span class="n">q</span><span class="o">|</span><span class="n">F</span><span class="o">&amp;</span><span class="mi">8</span><span class="o">&amp;&amp;</span><span class="n">m</span><span class="o">&gt;=</span><span class="n">l</span><span class="o">|</span><span class="n">F</span><span class="o">&amp;</span><span class="n">S</span><span class="p">))</span>                       <span class="cm">/*   or window incompatible */</span>
</span><span class="line">        <span class="n">d</span><span class="o">=</span><span class="n">X</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">Y</span><span class="o">=-</span><span class="mi">1</span><span class="p">;</span>                                  <span class="cm">/* start iter. from scratch */</span>
</span><span class="line">    <span class="n">W</span><span class="p">(</span><span class="n">d</span><span class="o">++&lt;</span><span class="n">n</span><span class="o">||</span><span class="n">d</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">||</span>              <span class="cm">/*** min depth = 2   iterative deepening loop */</span>
</span><span class="line">            <span class="n">z</span><span class="o">&amp;</span><span class="n">S</span><span class="o">&amp;&amp;</span><span class="n">K</span><span class="o">==</span><span class="n">I</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">GetTickCount</span><span class="p">()</span><span class="o">-</span><span class="n">Ticks</span><span class="o">&lt;</span><span class="n">tlim</span><span class="o">&amp;</span><span class="n">d</span><span class="o">&lt;=</span><span class="n">MaxDepth</span><span class="o">||</span> <span class="cm">/* root: deepen upto time   */</span>
</span><span class="line">                <span class="p">(</span><span class="n">K</span><span class="o">=</span><span class="n">X</span><span class="p">,</span><span class="n">L</span><span class="o">=</span><span class="n">Y</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="mi">3</span><span class="p">)))</span>                             <span class="cm">/* time&#39;s up: go do best    */</span>
</span><span class="line">    <span class="p">{</span><span class="n">x</span><span class="o">=</span><span class="n">B</span><span class="o">=</span><span class="n">X</span><span class="p">;</span><span class="n">lu</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>                                  <span class="cm">/* start scan at prev. best */</span>
</span><span class="line">        <span class="n">h</span><span class="o">=</span><span class="n">Y</span><span class="o">-</span><span class="mi">255</span><span class="p">;</span>                                       <span class="cm">/* if move, request 1st try */</span>
</span><span class="line">        <span class="n">P</span><span class="o">=</span><span class="n">d</span><span class="o">&gt;</span><span class="mi">2</span><span class="o">&amp;&amp;</span><span class="n">l</span><span class="o">+</span><span class="n">I</span><span class="o">?</span><span class="n">D</span><span class="p">(</span><span class="mi">16</span><span class="o">-</span><span class="n">k</span><span class="p">,</span><span class="o">-</span><span class="n">l</span><span class="p">,</span><span class="mi">1</span><span class="o">-</span><span class="n">l</span><span class="p">,</span><span class="o">-</span><span class="n">e</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">S</span><span class="p">,</span><span class="n">d</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span><span class="o">:</span><span class="n">I</span><span class="p">;</span>      <span class="cm">/* search null move         */</span>
</span><span class="line">        <span class="n">m</span><span class="o">=-</span><span class="n">P</span><span class="o">&lt;</span><span class="n">l</span><span class="o">|</span><span class="n">R</span><span class="o">&lt;</span><span class="mi">5</span><span class="o">?</span><span class="n">d</span><span class="o">-</span><span class="mi">2</span><span class="o">?-</span><span class="n">I</span><span class="o">:</span><span class="n">e</span><span class="o">:-</span><span class="n">P</span><span class="p">;</span>   <span class="cm">/*** prune if &gt; beta  unconsidered:static eval */</span>
</span><span class="line">        <span class="n">N</span><span class="o">++</span><span class="p">;</span>                                         <span class="cm">/* node count (for timing)  */</span>
</span><span class="line">        <span class="k">do</span><span class="p">{</span><span class="n">u</span><span class="o">=</span><span class="n">b</span><span class="p">[</span><span class="n">x</span><span class="p">];</span>                                   <span class="cm">/* scan board looking for   */</span>
</span><span class="line">            <span class="k">if</span><span class="p">(</span><span class="n">u</span><span class="p">)</span><span class="n">m</span><span class="o">=</span><span class="n">lu</span><span class="o">|</span><span class="n">u</span><span class="o">&amp;</span><span class="mi">15</span><span class="o">^</span><span class="mi">3</span><span class="o">?</span><span class="n">m</span><span class="o">:</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">98</span><span class="p">,</span><span class="n">I</span><span class="p">),</span><span class="n">lu</span><span class="o">=</span><span class="n">u</span><span class="o">&amp;</span><span class="mi">15</span><span class="o">^</span><span class="mi">3</span><span class="p">;</span>        <span class="cm">/* Kings facing each other  */</span>
</span><span class="line">            <span class="k">if</span><span class="p">(</span><span class="n">u</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">u</span><span class="o">&amp;</span><span class="mi">16</span><span class="p">)</span><span class="o">==</span><span class="n">k</span><span class="p">)</span>                            <span class="cm">/*  own piece (inefficient!)*/</span>
</span><span class="line">            <span class="p">{</span><span class="n">r</span><span class="o">=</span><span class="n">p</span><span class="o">=</span><span class="n">u</span><span class="o">&amp;</span><span class="mi">15</span><span class="p">;</span>                                  <span class="cm">/* p = piece type (set r&gt;0) */</span>
</span><span class="line">                <span class="n">j</span><span class="o">=</span><span class="n">od</span><span class="p">[</span><span class="n">p</span><span class="p">];</span>                                   <span class="cm">/* first step vector f.piece*/</span>
</span><span class="line">                <span class="n">W</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="n">o</span><span class="p">[</span><span class="o">++</span><span class="n">j</span><span class="p">])</span>                                <span class="cm">/* loop over directions o[] */</span>
</span><span class="line">                <span class="p">{</span><span class="n">A</span><span class="o">:</span>                                        <span class="cm">/* resume normal after best */</span>
</span><span class="line">                    <span class="n">flag</span><span class="o">=</span><span class="n">h</span><span class="o">?</span><span class="mi">3</span><span class="o">:</span><span class="n">of</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>                           <span class="cm">/* move modes (for fairies) */</span>
</span><span class="line">                    <span class="n">y</span><span class="o">=</span><span class="n">x</span><span class="p">;</span>                                      <span class="cm">/* (x,y)=move               */</span>
</span><span class="line">                    <span class="k">do</span><span class="p">{</span>                                       <span class="cm">/* y traverses ray, or:     */</span>
</span><span class="line">                        <span class="n">y</span><span class="o">=</span><span class="n">h</span><span class="o">?</span><span class="n">Y</span><span class="o">:</span><span class="n">y</span><span class="o">+</span><span class="n">r</span><span class="p">;</span>                               <span class="cm">/* sneak in prev. best move */</span>
</span><span class="line">                        <span class="k">if</span><span class="p">(</span><span class="n">y</span><span class="o">&gt;=</span><span class="mi">16</span><span class="o">*</span><span class="n">BH</span><span class="o">|</span><span class="p">(</span><span class="n">y</span><span class="o">&amp;</span><span class="mi">15</span><span class="p">)</span><span class="o">&gt;=</span><span class="n">BW</span><span class="p">)</span><span class="k">break</span><span class="p">;</span>            <span class="cm">/* board edge hit           */</span>
</span><span class="line">                        <span class="n">t</span><span class="o">=</span><span class="n">b</span><span class="p">[</span><span class="n">y</span><span class="p">];</span>                                  <span class="cm">/* captured piece           */</span>
</span><span class="line">                        <span class="k">if</span><span class="p">(</span><span class="n">flag</span><span class="o">&amp;</span><span class="mi">1</span><span class="o">+!</span><span class="n">t</span><span class="p">)</span>                            <span class="cm">/* mode (capt/nonc) allowed?*/</span>
</span><span class="line">                        <span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="n">t</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="n">t</span><span class="o">&amp;</span><span class="mi">16</span><span class="p">)</span><span class="o">==</span><span class="n">k</span><span class="o">||</span><span class="n">flag</span><span class="o">&gt;&gt;</span><span class="mi">10</span><span class="o">&amp;</span><span class="n">zn</span><span class="p">[</span><span class="n">y</span><span class="p">])</span><span class="k">break</span><span class="p">;</span>  <span class="cm">/* capture own or bad zone  */</span>
</span><span class="line">                            <span class="n">i</span><span class="o">=</span><span class="n">w</span><span class="p">[</span><span class="n">t</span><span class="o">&amp;</span><span class="mi">15</span><span class="p">];</span>                              <span class="cm">/* value of capt. piece t   */</span>
</span><span class="line">                            <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span><span class="n">m</span><span class="o">=</span><span class="n">I</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="mi">98</span><span class="p">;</span>                        <span class="cm">/* K capture                */</span>
</span><span class="line">                            <span class="k">if</span><span class="p">(</span><span class="n">m</span><span class="o">&gt;=</span><span class="n">l</span><span class="o">&amp;</span><span class="n">d</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span><span class="k">goto</span> <span class="n">C</span><span class="p">;</span>                     <span class="cm">/* abort on fail high       */</span>
</span><span class="line">                            <span class="n">v</span><span class="o">=</span><span class="n">d</span><span class="o">-</span><span class="mi">1</span><span class="o">?</span><span class="n">e</span><span class="o">:</span><span class="n">i</span><span class="o">-</span><span class="n">p</span><span class="p">;</span>                            <span class="cm">/*** MVV/LVA scoring if d=1**/</span>
</span><span class="line">                            <span class="k">if</span><span class="p">(</span><span class="n">d</span><span class="o">-!</span><span class="n">t</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span>                              <span class="cm">/*** all captures if d=2  ***/</span>
</span><span class="line">                            <span class="p">{</span><span class="n">v</span><span class="o">=</span><span class="n">centr</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">?</span><span class="n">b</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="mi">257</span><span class="p">]</span><span class="o">-</span><span class="n">b</span><span class="p">[</span><span class="n">y</span><span class="o">+</span><span class="mi">257</span><span class="p">]</span><span class="o">:</span><span class="mi">0</span><span class="p">;</span>        <span class="cm">/* center positional pts.   */</span>
</span><span class="line">                                <span class="n">b</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">b</span><span class="p">[</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="n">u</span><span class="p">;</span>                         <span class="cm">/* do move                  */</span>
</span><span class="line">                                <span class="n">v</span><span class="o">-=</span><span class="n">w</span><span class="p">[</span><span class="n">p</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">|</span><span class="n">R</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">?</span><span class="mi">0</span><span class="o">:</span><span class="mi">20</span><span class="p">;</span>                   <span class="cm">/*** freeze K in mid-game ***/</span>
</span><span class="line">                                <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">)</span>                                <span class="cm">/* pawns:                   */</span>
</span><span class="line">                                <span class="p">{</span><span class="n">v</span><span class="o">+=</span><span class="mi">2</span><span class="p">;</span>                                 <span class="cm">/* end-game Pawn-push bonus */</span>
</span><span class="line">                                    <span class="k">if</span><span class="p">(</span><span class="n">zn</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">-</span><span class="n">zn</span><span class="p">[</span><span class="n">y</span><span class="p">])</span><span class="n">b</span><span class="p">[</span><span class="n">y</span><span class="p">]</span><span class="o">+=</span><span class="mi">5</span><span class="p">,</span>               <span class="cm">/* upgrade Pawn and         */</span>
</span><span class="line">                                        <span class="n">i</span><span class="o">+=</span><span class="n">w</span><span class="p">[</span><span class="n">p</span><span class="o">+</span><span class="mi">5</span><span class="p">]</span><span class="o">-</span><span class="n">w</span><span class="p">[</span><span class="n">p</span><span class="p">];</span>                      <span class="cm">/*          promotion bonus */</span>
</span><span class="line">                                <span class="p">}</span>
</span><span class="line">                                <span class="k">if</span><span class="p">(</span><span class="n">z</span><span class="o">&amp;</span><span class="n">S</span> <span class="o">&amp;&amp;</span> <span class="n">GamePtr</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">)</span> <span class="n">v</span><span class="o">+=</span><span class="p">(</span><span class="n">rand</span><span class="p">()</span><span class="o">&gt;&gt;</span><span class="mi">10</span><span class="o">&amp;</span><span class="mi">31</span><span class="p">)</span><span class="o">-</span><span class="mi">16</span><span class="p">;</span> <span class="c1">// randomize in root</span>
</span><span class="line">                                <span class="n">J</span><span class="o">+=</span><span class="n">J</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="n">Z</span><span class="o">+=</span><span class="n">J</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
</span><span class="line">                                <span class="n">v</span><span class="o">+=</span><span class="n">e</span><span class="o">+</span><span class="n">i</span><span class="p">;</span><span class="n">V</span><span class="o">=</span><span class="n">m</span><span class="o">&gt;</span><span class="n">q</span><span class="o">?</span><span class="n">m</span><span class="o">:</span><span class="n">q</span><span class="p">;</span>                      <span class="cm">/*** new eval &amp; alpha    ****/</span>
</span><span class="line">                                <span class="n">C</span><span class="o">=</span><span class="n">d</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="n">d</span><span class="o">&gt;</span><span class="mi">5</span><span class="o">&amp;</span><span class="n">p</span><span class="o">&gt;</span><span class="mi">2</span><span class="o">&amp;!</span><span class="n">t</span><span class="o">&amp;!</span><span class="n">h</span><span class="p">);</span>                 <span class="cm">/* nw depth, reduce non-cpt.*/</span>
</span><span class="line">                                <span class="n">C</span><span class="o">=</span><span class="n">R</span><span class="o">&lt;</span><span class="mi">10</span><span class="o">|</span><span class="n">P</span><span class="o">-</span><span class="n">I</span><span class="o">|</span><span class="n">d</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">||</span><span class="n">t</span><span class="o">&amp;&amp;</span><span class="n">p</span><span class="o">-</span><span class="mi">3</span><span class="o">?</span><span class="n">C</span><span class="o">:</span><span class="n">d</span><span class="p">;</span>            <span class="cm">/* extend 1 ply if in-check */</span>
</span><span class="line">                                <span class="k">do</span>
</span><span class="line">                                    <span class="n">s</span><span class="o">=</span><span class="n">C</span><span class="o">&gt;</span><span class="mi">2</span><span class="o">|</span><span class="n">v</span><span class="o">&gt;</span><span class="n">V</span><span class="o">?-</span><span class="n">D</span><span class="p">(</span><span class="mi">16</span><span class="o">-</span><span class="n">k</span><span class="p">,</span><span class="o">-</span><span class="n">l</span><span class="p">,</span><span class="o">-</span><span class="n">V</span><span class="p">,</span><span class="o">-</span><span class="n">v</span><span class="p">,</span><span class="cm">/*** futility, recursive eval. of reply */</span>
</span><span class="line">                                            <span class="mi">0</span><span class="p">,</span><span class="n">C</span><span class="p">)</span><span class="o">:</span><span class="n">v</span><span class="p">;</span>
</span><span class="line">                                <span class="n">W</span><span class="p">(</span><span class="n">s</span><span class="o">&gt;</span><span class="n">q</span><span class="o">&amp;++</span><span class="n">C</span><span class="o">&lt;</span><span class="n">d</span><span class="p">);</span> <span class="n">v</span><span class="o">=</span><span class="n">s</span><span class="p">;</span>                     <span class="cm">/* no fail:re-srch unreduced*/</span>
</span><span class="line">                                <span class="k">if</span><span class="p">(</span><span class="n">z</span><span class="o">&amp;</span><span class="n">S</span><span class="o">&amp;&amp;</span><span class="n">K</span><span class="o">-</span><span class="n">I</span><span class="p">)</span>                           <span class="cm">/* move pending: check legal*/</span>
</span><span class="line">                                <span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="n">I</span><span class="o">&amp;&amp;</span><span class="n">x</span><span class="o">==</span><span class="n">K</span><span class="o">&amp;</span><span class="n">y</span><span class="o">==</span><span class="n">L</span><span class="p">)</span>                    <span class="cm">/*   if move found          */</span>
</span><span class="line">                                    <span class="p">{</span><span class="n">Q</span><span class="o">=-</span><span class="n">e</span><span class="o">-</span><span class="n">i</span><span class="p">;</span>
</span><span class="line">                                        <span class="n">a</span><span class="o">-&gt;</span><span class="n">D</span><span class="o">=</span><span class="mi">99</span><span class="p">;</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">V</span><span class="o">=</span><span class="mi">500</span><span class="p">;</span>                    <span class="cm">/* lock game in hash as loss*/</span>
</span><span class="line">                                        <span class="n">R</span><span class="o">-=</span><span class="n">i</span><span class="o">/</span><span class="n">FAC</span><span class="p">;</span>                            <span class="cm">/*** total captd material ***/</span>
</span><span class="line">                                        <span class="n">Fifty</span> <span class="o">=</span> <span class="n">t</span><span class="o">|</span><span class="n">p</span><span class="o">&lt;</span><span class="mi">3</span><span class="o">?</span><span class="mi">0</span><span class="o">:</span><span class="n">Fifty</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
</span><span class="line">                                        <span class="k">return</span> <span class="n">l</span><span class="p">;}</span>                <span class="cm">/*   &amp; not in check, signal */</span>
</span><span class="line">                                        <span class="n">v</span><span class="o">=</span><span class="n">m</span><span class="p">;</span>                                  <span class="cm">/* (prevent fail-lows on    */</span>
</span><span class="line">                                <span class="p">}</span>                                      <span class="cm">/*   K-capt. replies)       */</span>
</span><span class="line">                                <span class="n">J</span><span class="o">=</span><span class="n">f</span><span class="p">;</span><span class="n">Z</span><span class="o">=</span><span class="n">g</span><span class="p">;</span>
</span><span class="line">                                <span class="n">b</span><span class="p">[</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="n">t</span><span class="p">;</span><span class="n">b</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">=</span><span class="n">u</span><span class="p">;</span>                         <span class="cm">/* undo move                */</span>
</span><span class="line">                            <span class="p">}</span>                                       <span class="cm">/*          if non-castling */</span>
</span><span class="line">                            <span class="k">if</span><span class="p">(</span><span class="n">v</span><span class="o">&gt;</span><span class="n">m</span><span class="p">)</span>                                 <span class="cm">/* new best, update max,best*/</span>
</span><span class="line">                                <span class="n">m</span><span class="o">=</span><span class="n">v</span><span class="p">,</span><span class="n">X</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">Y</span><span class="o">=</span><span class="n">y</span><span class="p">;</span>                           <span class="cm">/* no marking!              */</span>
</span><span class="line">                            <span class="k">if</span><span class="p">(</span><span class="n">h</span><span class="p">){</span><span class="n">h</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">goto</span> <span class="n">A</span><span class="p">;}</span>                      <span class="cm">/* redo after doing old best*/</span>
</span><span class="line">                        <span class="p">}</span>
</span><span class="line">                        <span class="n">s</span><span class="o">=</span><span class="n">t</span><span class="p">;</span>
</span><span class="line">                        <span class="n">t</span><span class="o">+=</span><span class="n">flag</span><span class="o">&amp;</span><span class="mi">4</span><span class="p">;</span>                               <span class="cm">/* fake capt. for nonsliding*/</span>
</span><span class="line">                        <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="o">&amp;&amp;</span><span class="n">flag</span><span class="o">&amp;</span><span class="mi">8</span><span class="p">)</span><span class="n">t</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">flag</span><span class="o">^=</span><span class="n">flag</span><span class="o">&gt;&gt;</span><span class="mi">4</span><span class="o">&amp;</span><span class="mi">15</span><span class="p">;</span>       <span class="cm">/* hoppers go to next phase */</span>
</span><span class="line">                        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">flag</span><span class="o">&amp;</span><span class="n">S</span><span class="p">))</span>                            <span class="cm">/* zig-zag piece?           */</span>
</span><span class="line">                            <span class="n">r</span><span class="o">^=</span><span class="n">flag</span><span class="o">&gt;&gt;</span><span class="mi">12</span><span class="p">,</span><span class="n">flag</span><span class="o">^=</span><span class="n">flag</span><span class="o">&gt;&gt;</span><span class="mi">4</span><span class="o">&amp;</span><span class="mi">15</span><span class="p">;</span>           <span class="cm">/* alternate vector &amp; mode  */</span>
</span><span class="line">                    <span class="p">}</span><span class="n">W</span><span class="p">(</span><span class="o">!</span><span class="n">t</span><span class="p">);</span>                                   <span class="cm">/* if not capt. continue ray*/</span>
</span><span class="line">                <span class="p">}}</span>
</span><span class="line">                <span class="k">if</span><span class="p">((</span><span class="o">++</span><span class="n">x</span><span class="o">&amp;</span><span class="mi">15</span><span class="p">)</span><span class="o">&gt;=</span><span class="n">BW</span><span class="p">)</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">+</span><span class="mi">16</span><span class="o">&amp;</span><span class="mi">240</span><span class="p">,</span><span class="n">lu</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>            <span class="cm">/* next sqr. of board, wrap */</span>
</span><span class="line">                <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;=</span><span class="mi">16</span><span class="o">*</span><span class="n">BH</span><span class="p">)</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span class="line">        <span class="p">}</span><span class="n">W</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">B</span><span class="p">);</span>
</span><span class="line"><span class="nl">C:</span><span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">D</span><span class="o">&lt;</span><span class="mi">99</span><span class="p">)</span>                                  <span class="cm">/* protect game history     */</span>
</span><span class="line">      <span class="n">a</span><span class="o">-&gt;</span><span class="n">K</span><span class="o">=</span><span class="n">Z</span><span class="p">,</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">V</span><span class="o">=</span><span class="n">m</span><span class="p">,</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">D</span><span class="o">=</span><span class="n">d</span><span class="p">,</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">X</span><span class="o">=</span><span class="n">X</span><span class="p">,</span>                <span class="cm">/* always store in hash tab */</span>
</span><span class="line">          <span class="n">a</span><span class="o">-&gt;</span><span class="n">F</span><span class="o">=</span><span class="mi">8</span><span class="o">*</span><span class="p">(</span><span class="n">m</span><span class="o">&gt;</span><span class="n">q</span><span class="p">)</span><span class="o">|</span><span class="n">S</span><span class="o">*</span><span class="p">(</span><span class="n">m</span><span class="o">&lt;</span><span class="n">l</span><span class="p">),</span><span class="n">a</span><span class="o">-&gt;</span><span class="n">Y</span><span class="o">=</span><span class="n">Y</span><span class="p">;</span>                <span class="cm">/* move, type (bound/exact),*/</span>
</span><span class="line">  <span class="k">if</span><span class="p">(</span><span class="n">z</span><span class="o">&amp;</span><span class="n">S</span><span class="o">&amp;&amp;</span><span class="n">Post</span><span class="p">){</span>
</span><span class="line">      <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%2d &quot;</span><span class="p">,</span><span class="n">d</span><span class="o">-</span><span class="mi">2</span><span class="p">);</span>
</span><span class="line">      <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%6d &quot;</span><span class="p">,</span><span class="n">m</span><span class="p">);</span>
</span><span class="line">      <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%8d %10d %c%c%c%c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,(</span><span class="n">GetTickCount</span><span class="p">()</span><span class="o">-</span><span class="n">Ticks</span><span class="p">)</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span><span class="n">N</span><span class="p">,</span>
</span><span class="line">              <span class="sc">&#39;i&#39;</span><span class="o">-</span><span class="p">(</span><span class="n">X</span><span class="o">&gt;&gt;</span><span class="mi">4</span><span class="o">&amp;</span><span class="mi">15</span><span class="p">),</span><span class="sc">&#39;9&#39;</span><span class="o">-</span><span class="p">(</span><span class="n">X</span><span class="o">&amp;</span><span class="mi">15</span><span class="p">),</span><span class="sc">&#39;i&#39;</span><span class="o">-</span><span class="p">(</span><span class="n">Y</span><span class="o">&gt;&gt;</span><span class="mi">4</span><span class="o">&amp;</span><span class="mi">15</span><span class="p">),</span><span class="sc">&#39;9&#39;</span><span class="o">-</span><span class="p">(</span><span class="n">Y</span><span class="o">&amp;</span><span class="mi">15</span><span class="p">)),</span><span class="n">fflush</span><span class="p">(</span><span class="n">stdout</span><span class="p">);}</span>
</span><span class="line">    <span class="p">}</span>                                             <span class="cm">/*    encoded in X S,8 bits */</span>
</span><span class="line">    <span class="k">if</span><span class="p">(</span><span class="n">z</span><span class="o">&amp;</span><span class="mi">4</span><span class="o">*</span><span class="n">S</span><span class="p">)</span><span class="n">K</span><span class="o">=</span><span class="n">X</span><span class="p">,</span><span class="n">L</span><span class="o">=</span><span class="n">Y</span><span class="o">&amp;~</span><span class="n">S</span><span class="p">;</span>
</span><span class="line">    <span class="k">return</span> <span class="n">m</span><span class="o">+=</span><span class="n">m</span><span class="o">&lt;</span><span class="n">e</span><span class="p">;</span>                                <span class="cm">/* delayed-loss bonus       */</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Then I think for a while….</p>

<p>maxqi engine is so pop, why nobody discuss this??</p>

<p>why no notes? Google maxqi,no good results.</p>

<p>Then I Google fairymax, still no good results…</p>

<p>At last, I saw that the fairymax derived from Micro-Max…</p>

<p>then ,i got everything….</p>

<h5 id="micro-maxhttphomehccnetnlhgmullermax-src2html"><a href="http://home.hccnet.nl/h.g.muller/max-src2.html">micro-max</a></h5>

<h6 id="basic-data-representations"># Basic Data Representations</h6>

<ul>
  <li>Piece Encoding</li>
  <li>Board Representation</li>
  <li>Move Generation</li>
</ul>

<h6 id="basic-moves"># Basic Moves</h6>

<ul>
  <li>En Passant Capture</li>
  <li>Castling</li>
  <li>Pawn Promotions</li>
</ul>

<h6 id="search-algorithm"># Search Algorithm</h6>

<ul>
  <li>Alpha-Beta Minimax</li>
  <li>Quiescence Search</li>
  <li>Do and Undo Move</li>
  <li>Iterative Deepening</li>
  <li>Move Sorting</li>
</ul>

<h6 id="transposition-table"># Transposition Table</h6>

<ul>
  <li>Hashing</li>
  <li>Replacement</li>
</ul>

<h6 id="evaluation">#Evaluation</h6>
<ul>
  <li>Material</li>
  <li>Piece-Square Table</li>
  <li>Checkmate and Stalemate</li>
  <li>Delay Penalty</li>
</ul>

<h6 id="the-interface"># The Interface</h6>
<p>Move Legality Checking</p>

</div>
  
  

<br>
<a href="/blog/2013/06/23/something-about-chess-series-with-ai/#disqus_thread">Comments</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/23/database-overview/">Database Overview</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-23T22:46:00+08:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2013</time>
        
         | <a href="/blog/2013/04/23/database-overview/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="preface">Preface</h2>

<p>What’s the most important?
Infomation!</p>

<p>How to get and save infomation?
Database.</p>

<p>Here is some story about database.</p>

<p>Generally, database can be divided into two arm, SQL and NoSQL.</p>

<h2 id="sqlhttpenwikipediaorgwikistructuredquerylanguage"><a href="http://en.wikipedia.org/wiki/Structured_Query_Language">SQL</a></h2>

<p>SQL (Structured Query Language) is very common.<br />
mysql ,sybase and oracle are well-known as database, which is used a lot</p>

<table class="mytable">
  <thead>
    <tr>
      <th>Source</th>
      <th style="text-align: left">Common name</th>
      <th style="text-align: center">Full name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Microsoft / Sybase</td>
      <td style="text-align: left">T-SQL</td>
      <td style="text-align: center">Transact-SQL</td>
    </tr>
    <tr>
      <td>MySQL</td>
      <td style="text-align: left">SQL/PSM</td>
      <td style="text-align: center">SQL/Persistent Stored Module (implements SQL/PSM)</td>
    </tr>
    <tr>
      <td>Oracle</td>
      <td style="text-align: left">PL/SQL</td>
      <td style="text-align: center">Procedural Language/SQL (based on Ada)</td>
    </tr>
    <tr>
      <td>Sybase</td>
      <td style="text-align: left">Watcom-SQL	SQL Anywhere</td>
      <td style="text-align: center">Watcom-SQL Dialect</td>
    </tr>
  </tbody>
</table>

<h2 id="nosqlhttpenwikipediaorgwikinosql"><a href="http://en.wikipedia.org/wiki/Nosql">NoSQL</a></h2>

<p>Feature:
It provides mechanism for storage and retrieval of data that use looser consistency models than traditional relational databases  </p>

<p>Achieve horizontal scaling and higher availability</p>

<ul>
  <li>
    <h5 id="document-store">Document Store</h5>
  </li>
</ul>

<p>Document is encoded to some 
In general, they all assume that documents <strong>encapsulate</strong> and <strong>encode</strong> data (or information) in some standard formats or encodings.
Such as, XML, Jason, YAML etc.</p>

<table class="mytable">
  <thead>
    <tr>
      <th>Name</th>
      <th style="text-align: left">Language</th>
      <th style="text-align: center">Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BaseX</td>
      <td style="text-align: left">Java, XQuery</td>
      <td style="text-align: center">XML database</td>
    </tr>
    <tr>
      <td>Couchbase Server</td>
      <td style="text-align: left">Erlang, C++</td>
      <td style="text-align: center">Support for JSON and binary documents</td>
    </tr>
    <tr>
      <td>Apache CouchDB</td>
      <td style="text-align: left">Erlang</td>
      <td style="text-align: center">JSON store</td>
    </tr>
    <tr>
      <td>MongoDB</td>
      <td style="text-align: left">C++, C#</td>
      <td style="text-align: center">BSON store (binary format JSON)</td>
    </tr>
    <tr>
      <td>SimpleDB</td>
      <td style="text-align: left">Erlang</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td>Oracle NoSQL Database</td>
      <td style="text-align: left">Java</td>
      <td style="text-align: center"> </td>
    </tr>
  </tbody>
</table>

<ul>
  <li>
    <h5 id="graph">Graph</h5>
  </li>
</ul>

<p>The kind of data could be social relations, public transport links, road maps or network topologies, for example.</p>

<ul>
  <li>
    <h5 id="key-value-store">Key Value Store</h5>
    <p>kv cache in RAM  </p>
  </li>
</ul>

<p>Radis </p>

<p>Memcached</p>

<p>Keyvalue stores on solid state or rotating disk</p>

<p>MemcacheDB</p>

<p>MongoDB</p>

<ul>
  <li>
    <h5 id="multivalue-database">Multivalue database</h5>
  </li>
</ul>

<p>InfinityDB</p>

<ul>
  <li>
    <h5 id="object-databasehttpenwikipediaorgwikiobjectdatabase"><a href="http://en.wikipedia.org/wiki/Object_database">Object database</a></h5>
  </li>
  <li>
    <h5 id="tabular">Tabular</h5>
  </li>
</ul>

<p>Apache Accumulo</p>

<p>BigTable</p>

<p>Apache Hbase</p>

<p>Hypertable</p>

<p>Reference</p>

<ol>
  <li><a href="">http://nosql-database.org/</a></li>
</ol>

</div>
  
  

<br>
<a href="/blog/2013/04/23/database-overview/#disqus_thread">Comments</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/21/something-interesting-about-ai/">Something Interesting About AI</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-21T19:53:00+08:00" pubdate data-updated="true">Apr 21<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/04/21/something-interesting-about-ai/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
  <li>
    <h2 id="generate-music-algorithmicallyhttpwwwdatabozocom20130412generatingmusicalgorithmicallyhtml"><a href="http://www.databozo.com/2013/04/12/Generating_music_algorithmically.html">Generate Music Algorithmically</a></h2>
  </li>
</ul>

<h3 id="music-feature">Music Feature</h3>

<p>Music is compose by lots of note.<br />
The feature of note is frequece and length.</p>

<h3 id="markov-chain">Markov Chain</h3>

<p>The idea tech of Markov Chain is that, the next state (to us,it’s music note) is decided by the previous N states, only.</p>

<p>That means:<br />
the next note’s freq is decided by the previous’s.
the next note’s length is decided by the previous’s.</p>

<h3 id="machine-learning">Machine Learning</h3>
<p>First, learn the trans probability throught lots of music sample.</p>

<p>Then, we got the probability from Freq A to Freq B, From length 1/2 to 1/4</p>

<p>Last, generate note by probability, random. Create music file according to the note data.</p>

<h3 id="code">Code</h3>

<p>The lib “pysynth.py” for gen music through two arg (freq and length)</p>

<p>The key program “MarkovBuilder.py” for TransArray&amp;GenerateNote</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
</pre></td><td class="code"><pre><code class="py"><span class="line"><span class="sd">&#39;&#39;&#39;</span>
</span><span class="line"><span class="sd">Created on May 14, 2009</span>
</span><span class="line">
</span><span class="line"><span class="sd">@author: darkxanthos</span>
</span><span class="line"><span class="sd">&#39;&#39;&#39;</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">random</span>
</span><span class="line">
</span><span class="line"><span class="k">class</span> <span class="nc">MarkovBuilder</span><span class="p">:</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value_list</span><span class="p">):</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_values_added</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_value_lookup</span> <span class="o">=</span> <span class="n">value_list</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_value_lookup</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class="line">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">value_list</span><span class="p">)):</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_value_lookup</span><span class="p">[</span><span class="n">value_list</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="n">i</span>
</span><span class="line">        <span class="c">#Initialize our adjacency matrix with the initial</span>
</span><span class="line">        <span class="c">#probabilities for note transitions.</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_matrix</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">value_list</span><span class="p">))]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">value_list</span><span class="p">))]</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_value</span><span class="p">,</span> <span class="n">to_value</span><span class="p">):</span>
</span><span class="line">        <span class="sd">&quot;&quot;&quot;Add a path from a note to another note. Re-adding a path between notes will increase the associated weight.&quot;&quot;&quot;</span>
</span><span class="line">        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_lookup</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_matrix</span><span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="n">from_value</span><span class="p">]][</span><span class="n">value</span><span class="p">[</span><span class="n">to_value</span><span class="p">]]</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_values_added</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_values_added</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">next_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_value</span><span class="p">):</span>
</span><span class="line">        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value_lookup</span><span class="p">[</span><span class="n">from_value</span><span class="p">]</span>
</span><span class="line">        <span class="n">value_counts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_matrix</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
</span><span class="line">        <span class="n">value_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">randomly_choose</span><span class="p">(</span><span class="n">value_counts</span><span class="p">)</span>
</span><span class="line">        <span class="k">if</span><span class="p">(</span><span class="n">value_index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
</span><span class="line">            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">,</span> <span class="s">&quot;Non-existent value selected.&quot;</span>
</span><span class="line">        <span class="k">else</span><span class="p">:</span>
</span><span class="line">            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_value_lookup</span><span class="p">[</span><span class="n">value_index</span><span class="p">]</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">randomly_choose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choice_counts</span><span class="p">):</span>
</span><span class="line">        <span class="sd">&quot;&quot;&quot;Given an array of counts, returns the index that was randomly chosen&quot;&quot;&quot;</span>
</span><span class="line">        <span class="n">counted_sum</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class="line">        <span class="n">count_sum</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">choice_counts</span><span class="p">)</span>
</span><span class="line">        <span class="n">selected_count</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">count_sum</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span class="line">        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">choice_counts</span><span class="p">)):</span>
</span><span class="line">            <span class="n">counted_sum</span> <span class="o">+=</span> <span class="n">choice_counts</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span class="line">            <span class="k">if</span><span class="p">(</span><span class="n">counted_sum</span> <span class="o">&gt;=</span> <span class="n">selected_count</span><span class="p">):</span>
</span><span class="line">                <span class="k">return</span> <span class="n">index</span>
</span><span class="line">        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">,</span> <span class="s">&quot;Impossible value selection made. BAD!&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Main Program “MarkovMusic.py”</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
</pre></td><td class="code"><pre><code class="py"><span class="line"><span class="sd">&#39;&#39;&#39;</span>
</span><span class="line"><span class="sd">Created on May 12, 2009</span>
</span><span class="line">
</span><span class="line"><span class="sd">@author: Justin Bozonier</span>
</span><span class="line"><span class="sd">&#39;&#39;&#39;</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">pysynth</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">MarkovBuilder</span> <span class="kn">import</span> <span class="n">MarkovBuilder</span>
</span><span class="line">
</span><span class="line"><span class="k">class</span> <span class="nc">MusicMatrix</span><span class="p">:</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_previous_note</span> <span class="o">=</span> <span class="bp">None</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_markov</span> <span class="o">=</span> <span class="n">MarkovBuilder</span><span class="p">([</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;a#&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="s">&quot;c#&quot;</span><span class="p">,</span> <span class="s">&quot;d&quot;</span><span class="p">,</span> <span class="s">&quot;d#&quot;</span><span class="p">,</span> <span class="s">&quot;e&quot;</span><span class="p">,</span> <span class="s">&quot;f&quot;</span><span class="p">,</span> <span class="s">&quot;f#&quot;</span><span class="p">,</span> <span class="s">&quot;g&quot;</span><span class="p">,</span> <span class="s">&quot;g#&quot;</span><span class="p">])</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_timings</span> <span class="o">=</span> <span class="n">MarkovBuilder</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">])</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to_note</span><span class="p">):</span>
</span><span class="line">        <span class="sd">&quot;&quot;&quot;Add a path from a note to another note. Re-adding a path between notes will increase the associated weight.&quot;&quot;&quot;</span>
</span><span class="line">        <span class="k">if</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_previous_note</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
</span><span class="line">            <span class="bp">self</span><span class="o">.</span><span class="n">_previous_note</span> <span class="o">=</span> <span class="n">to_note</span>
</span><span class="line">            <span class="k">return</span>
</span><span class="line">        <span class="n">from_note</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_note</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_markov</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">from_note</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">to_note</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_timings</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">from_note</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">to_note</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span class="line">        <span class="bp">self</span><span class="o">.</span><span class="n">_previous_note</span> <span class="o">=</span> <span class="n">to_note</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">next_note</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">from_note</span><span class="p">):</span>
</span><span class="line">        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_markov</span><span class="o">.</span><span class="n">next_value</span><span class="p">(</span><span class="n">from_note</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timings</span><span class="o">.</span><span class="n">next_value</span><span class="p">(</span><span class="n">from_note</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
</span><span class="line">
</span><span class="line"><span class="c"># Playing it comes next :)</span>
</span><span class="line"><span class="c">#test = [[&#39;c&#39;,4], [&#39;e&#39;,4], [&#39;g&#39;,4], [&#39;c5&#39;,1]]</span>
</span><span class="line"><span class="c">#pysynth.make_wav(test, fn = &quot;test.wav&quot;)</span>
</span><span class="line">
</span><span class="line"><span class="n">musicLearner</span> <span class="o">=</span> <span class="n">MusicMatrix</span><span class="p">()</span>
</span><span class="line">
</span><span class="line"><span class="c"># Input the melody of Row, Row, Row Your Boat</span>
</span><span class="line"><span class="c"># The MusicMatrix will automatically use this to </span>
</span><span class="line"><span class="c"># model our own song after it.</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;d&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;e&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;e&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;d&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;e&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;f&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;g&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</span><span class="line">
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line">
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;g&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;g&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;g&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line">
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;e&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;e&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;e&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line">
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line">
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;g&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;f&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;e&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;d&quot;</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</span><span class="line"><span class="n">musicLearner</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</span><span class="line">
</span><span class="line"><span class="n">random_score</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="line"><span class="n">current_note</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;c&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
</span><span class="line"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">):</span>
</span><span class="line">    <span class="k">print</span> <span class="n">current_note</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">current_note</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span class="line">    <span class="n">current_note</span> <span class="o">=</span> <span class="n">musicLearner</span><span class="o">.</span><span class="n">next_note</span><span class="p">(</span><span class="n">current_note</span><span class="p">)</span>
</span><span class="line">    <span class="n">random_score</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_note</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">pysynth</span><span class="o">.</span><span class="n">make_wav</span><span class="p">(</span><span class="n">random_score</span><span class="p">,</span> <span class="n">fn</span> <span class="o">=</span> <span class="s">&quot;first_score.wav&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>code src: <br />
<a href="http://github.com/jcbozonier/MarkovMusic/tree/master">http://github.com/jcbozonier/MarkovMusic/tree/master</a></p>

<ul>
  <li>
    <h2 id="ai-snakehttphawsteincompostssnake-aihtml"><a href="http://hawstein.com/posts/snake-ai.html">AI Snake</a></h2>
  </li>
</ul>

<h4 id="strategy-1">Strategy 1</h4>

<p>If Target is the food, choose the shortest path</p>

<h4 id="strategy-2">Strategy 2</h4>

<p>If Target is the tail, choose the longest path</p>

<p>code src:<br />
<a href="">https://github.com/Hawstein/snake-ai</a></p>

<ul>
  <li>
    <h2 id="ai-solves-super-mario-bros-and-other-classic-nes-gameshttpwwwwiredcouknewsarchive2013-0412super-mario-solved"><a href="http://www.wired.co.uk/news/archive/2013-04/12/super-mario-solved">AI ‘solves’ Super Mario Bros. and other classic NES games</a></h2>
  </li>
</ul>

<embed src="http://player.youku.com/player.php/sid/XNTQzMTM1NDky/v.swf" allowfullscreen="true" quality="high" width="480" height="400" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash" />

<p><a href="">http://v.youku.com/v_show/id_XNTQzMTM1NDky.html</a></p>

<p><a href="">http://www.cs.cmu.edu/~tom7/mario/mario.pdf</a></p>

</div>
  
  

<br>
<a href="/blog/2013/04/21/something-interesting-about-ai/#disqus_thread">Comments</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/20/android-dev-on-osx/">Android Dev on OSX</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-20T00:00:00+08:00" pubdate data-updated="true">Apr 20<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/20/android-dev-on-osx/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="some-gossip">Some gossip</h2>

<p>Today it prove the conclusion that Google is much better than baidu, esp in Tech Problem.</p>

<p>here is one:</p>

<p>Android Emulation Key HOME is not found on OSX.  </p>

<p>There is not HOME key on OSX.</p>

<p>After lots of try, i got ESC, but it’s BACK key.</p>

<p>By Bidu, try lots of query, it does not work.</p>

<p>By google, it works immediately</p>

<h2 id="android-emulator-key-mapping-on-osx">Android Emulator Key Mapping On OSX</h2>

<p>from <a href="">http://developer.android.com/tools/help/emulator.html</a></p>

<p>Home = HOME (FN + left_arrow on Macbooks)<br />
Menu (left softkey) = F2 or Page-up button<br />
Star (right softkey) = Shift-F2 or Page Down<br />
Back = ESC<br />
Call/dial button = F3<br />
Hangup/end call button = F4<br />
Search = F5<br />
Power button = F7<br />
Audio volume up button = KEYPAD_PLUS, Ctrl-F5<br />
Audio volume down button = KEYPAD_MINUS, Ctrl-F6<br />
Camera button = Ctrl-KEYPAD<em>5, Ctrl-F3<br />
Switch to previous layout orientation (for example, portrait, landscape) = KEYPAD</em>7, Ctrl-F11<br />
Switch to next layout orientation (for example, portrait, landscape) = KEYPAD<em>9, Ctrl-F12<br />
Toggle cell networking on/off = F8<br />
Toggle code profiling = F9 (only with -trace startup option)<br />
Toggle fullscreen mode = Alt-Enter<br />
Toggle trackball mode = F6
Enter trackball mode temporarily (while key is pressed) = Delete
DPad left/up/right/down = KEYPAD</em>4/8/6/2
DPad center click = KEYPAD_5
Onion alpha increase/decrease = KEYPAD_MULTIPLY(*) / KEYPAD_DIVIDE(/)</p>

<p><a href="">http://stackoverflow.com/questions/7628606/how-to-emulate-pressing-home-button-in-android-emulator</a></p>
</div>
  
  

<br>
<a href="/blog/2013/04/20/android-dev-on-osx/#disqus_thread">Comments</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/10/tv-series-the-practice/">TV Series the Practice</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-10T22:22:00+08:00" pubdate data-updated="true">Apr 10<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/10/tv-series-the-practice/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="whats-the-practice">What’s the practice</h2>

<p>The Practice is an American TV series, legal drama. </p>

<p>This show won the Emmy in 1998 and 1999 for Best Drama Series.<br />
The Practice focused on the law firm of Robert Donnell and Associates (later becoming Donnell, Young, Dole, &amp; Frutt, and ultimately Young, Frutt, &amp; Berluti).   </p>

<p>Every story per ep, is made up one or two cases, including both criminal and civil cases, which often mirror current events.Conflict between legal ethics and personal morality was a recurring theme.   </p>

<p>Robert Donnell is the boss, which is tall, handsome, rich, whose gf, linsay Dole and Helen Gamble.<br />
Eugene Young is my favourite lawyer actor, black, strong in debating. <br />
Rebecca Washington, assist of the law firm.<br />
Jimmy Berluti, some poooor guy, fired by last firm for doing something awful and cheating to help bobby donnell.<br />
Ellenor Frutt, fat woman, with a sharp teeth.  </p>

<p>Bobby is an idealist, a lawyer and wanna help the innocent men out.  However, he soon learns that drug dealers and other undeniably guilty clients tend to be the ones who provide the business that keep the firm running.
After realize that, Bobby change his idea that defending for the innocent to defending for the system.</p>

<p>(the jury system, defend lawyer and district attorney PK, the judge is just a monitor, the jury make the decision)</p>

<p>Helen is a DA, wanna to put the bad men into jail, limited to the jury system, which is her tool too.</p>

<p>The Practice is the greatest legal drama, no other series in the same level with it.</p>

<h2 id="my-practice">My Practice</h2>
<p>The practice has eight season.
Seaon 8 is my first.</p>

<p>I got shocked and attracted as soon as the s8ep1. even though, at first the reason is alan shore (some guy from Boston Legal)</p>

<p>Maybe two or three years later, the season 1 ,2, 3 come out ,thanks for Douban KW Group.</p>

<p>Here is the problem.
After KW group has tranlated S1,S2,S3, they decided to stop their work.
The stop reason is heard that Season 4,5,6,7 is not as good as S1-3
However, I still wanna see them, so far</p>

<p>It’s difficult for me to see them totally without any subtitle.
So I got some english subtitle from shooter.cn
Generally, it is OK for me, but still a litter confusing when debating in the law room.
It’s too fast to follow it.</p>

<p>So I decide to do a chn &amp; eng mixed subtitle.</p>

<h2 id="mixed-subtitle">Mixed Subtitle</h2>
<p>1, Got the English subtitle</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class=""><span class="line">
</span><span class="line">1
</span><span class="line">00:00:00,312 --&gt; 00:00:01,833
</span><span class="line">Previously on The Practice
</span><span class="line">
</span><span class="line">2
</span><span class="line">00:00:01,959 --&gt; 00:00:03,488
</span><span class="line">Something wrong, Ellenor? 
</span><span class="line">
</span><span class="line">3
</span><span class="line">00:00:03,584 --&gt; 00:00:04,848
</span><span class="line">You came to kill me? 
</span><span class="line">
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>2, translate it to Chinese </p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class=""><span class="line">
</span><span class="line">1 
</span><span class="line">00:00:00,312 - &gt; 00:00:01,833 
</span><span class="line">以前的做法 
</span><span class="line">
</span><span class="line">2 
</span><span class="line">00:00:01,959 - &gt; 00:00:03,488 
</span><span class="line">有什么问题，Ellenor？ 
</span><span class="line">
</span><span class="line">3 
</span><span class="line">00:00:03,584 - &gt; 00:00:04,848 
</span><span class="line">你来杀我吗？ 
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>3, Merge it </p>

<p>the code is like this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
</pre></td><td class="code"><pre><code class="py"><span class="line"><span class="c">#! /usr/bin/env python</span>
</span><span class="line">
</span><span class="line"><span class="kn">import</span> <span class="nn">time</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">sys</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">exceptions</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">string</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">):</span>
</span><span class="line">	<span class="n">englist_title_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s">&quot;r&quot;</span><span class="p">)</span>
</span><span class="line">	<span class="n">chinese_title_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="s">&quot;r&quot;</span><span class="p">)</span>
</span><span class="line">	<span class="n">mixed_title_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="s">&quot;w&quot;</span><span class="p">)</span>
</span><span class="line">	<span class="n">sub_index</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class="line">	<span class="n">sub_content</span> <span class="o">=</span> <span class="p">{}</span>
</span><span class="line">	<span class="k">while</span> <span class="mi">1</span> <span class="p">:</span>
</span><span class="line">		<span class="c">### index line</span>
</span><span class="line">		<span class="n">line</span> <span class="o">=</span> <span class="n">englist_title_file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">		<span class="k">if</span> <span class="ow">not</span> <span class="n">line</span> <span class="ow">or</span> <span class="n">line</span><span class="o">==</span><span class="s">&quot;&quot;</span> <span class="ow">or</span> <span class="n">line</span><span class="o">==</span><span class="s">&quot;</span><span class="se">\r</span><span class="s">&quot;</span> <span class="ow">or</span> <span class="n">line</span><span class="o">==</span><span class="s">&quot;</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">:</span>
</span><span class="line">			<span class="k">break</span>
</span><span class="line">
</span><span class="line">		<span class="k">if</span> <span class="n">sub_index</span> <span class="o">==</span> <span class="n">string</span><span class="o">.</span><span class="n">atoi</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
</span><span class="line">			<span class="c">### sub time line</span>
</span><span class="line">			<span class="n">englist_title_file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span class="line">			<span class="c">### english subtitle line</span>
</span><span class="line">			<span class="n">sub_content</span><span class="p">[</span><span class="n">sub_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">englist_title_file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span class="line">			<span class="c">### blank line</span>
</span><span class="line">			<span class="n">englist_title_file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">			<span class="n">sub_index</span> <span class="o">+=</span> <span class="mi">1</span>	
</span><span class="line">	<span class="n">sub_index_max</span> <span class="o">=</span> <span class="n">sub_index</span>		
</span><span class="line">	<span class="n">sub_index</span> <span class="o">=</span> <span class="mi">1</span>	
</span><span class="line">	<span class="k">while</span> <span class="mi">1</span> <span class="p">:</span>
</span><span class="line">		<span class="c">### index line</span>
</span><span class="line">		<span class="n">line</span> <span class="o">=</span> <span class="n">chinese_title_file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span class="line">		<span class="n">mixed_title_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">		<span class="k">print</span> <span class="s">&quot;xxxxx=    &quot;</span><span class="o">+</span><span class="n">line</span>
</span><span class="line">		<span class="k">if</span> <span class="ow">not</span> <span class="n">line</span> <span class="ow">or</span> <span class="n">line</span><span class="o">==</span><span class="s">&quot;&quot;</span> <span class="ow">or</span> <span class="n">line</span><span class="o">==</span><span class="s">&quot;</span><span class="se">\r</span><span class="s">&quot;</span> <span class="ow">or</span> <span class="n">line</span><span class="o">==</span><span class="s">&quot;</span><span class="se">\r\n</span><span class="s">&quot;</span><span class="p">:</span>
</span><span class="line">			<span class="k">break</span>
</span><span class="line">
</span><span class="line">		<span class="k">if</span> <span class="n">sub_index</span> <span class="o">==</span> <span class="n">string</span><span class="o">.</span><span class="n">atoi</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
</span><span class="line">			<span class="c">### sub time line</span>
</span><span class="line">			<span class="n">line</span> <span class="o">=</span> <span class="n">chinese_title_file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span class="line">			<span class="n">mixed_title_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span class="line">			<span class="c">### chinese subtitle line</span>
</span><span class="line">			<span class="n">line</span> <span class="o">=</span> <span class="n">chinese_title_file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span class="line">			<span class="n">mixed_title_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span class="line">			<span class="c">### english subtitle line</span>
</span><span class="line">			<span class="n">line</span> <span class="o">=</span> <span class="n">sub_content</span><span class="p">[</span><span class="n">sub_index</span><span class="p">]</span>
</span><span class="line">			<span class="n">mixed_title_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span class="line">			<span class="c">### blank line</span>
</span><span class="line">			<span class="n">line</span> <span class="o">=</span> <span class="n">chinese_title_file</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
</span><span class="line">			<span class="n">mixed_title_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">			<span class="n">sub_index</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class="line">		<span class="k">if</span> <span class="n">sub_index</span> <span class="o">&gt;=</span> <span class="n">sub_index_max</span> <span class="p">:</span>
</span><span class="line">			<span class="k">break</span>
</span><span class="line">
</span><span class="line">	<span class="n">englist_title_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">	<span class="n">chinese_title_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">	<span class="n">mixed_title_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
</span><span class="line">	<span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>4, The mixed subtitle is done</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="py"><span class="line"><span class="mi">1</span>
</span><span class="line"><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">,</span><span class="mi">312</span> <span class="o">-</span> <span class="o">&gt;</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">01</span><span class="p">,</span><span class="mi">833</span>
</span><span class="line"><span class="err">以前的做法</span>
</span><span class="line"><span class="n">Previously</span> <span class="n">on</span> <span class="n">The</span> <span class="n">Practice</span>
</span><span class="line">
</span><span class="line"><span class="mi">2</span>
</span><span class="line"><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">01</span><span class="p">,</span><span class="mi">959</span> <span class="o">-</span> <span class="o">&gt;</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">03</span><span class="p">,</span><span class="mi">488</span>
</span><span class="line"><span class="err">有什么问题，</span><span class="n">Ellenor</span><span class="err">？</span>
</span><span class="line"><span class="n">Something</span> <span class="n">wrong</span><span class="p">,</span> <span class="n">Ellenor</span><span class="err">?</span>
</span><span class="line">
</span><span class="line"><span class="mi">3</span>
</span><span class="line"><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">03</span><span class="p">,</span><span class="mi">584</span> <span class="o">-</span> <span class="o">&gt;</span> <span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">04</span><span class="p">,</span><span class="mi">848</span>
</span><span class="line"><span class="err">你来杀我吗？</span>
</span><span class="line"><span class="n">You</span> <span class="n">came</span> <span class="n">to</span> <span class="n">kill</span> <span class="n">me</span><span class="err">?</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Is that COOOOOOL?!
Tech Changes World</p>

</div>
  
  

<br>
<a href="/blog/2013/04/10/tv-series-the-practice/#disqus_thread">Comments</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/24/life-in-china/">Life in China</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-24T15:54:00+08:00" pubdate data-updated="true">Mar 24<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/24/life-in-china/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3 id="life-is-a-stuggle">Life is a stuggle</h3>

<p>Human being is a magical kind of animal.</p>

<p>And as part of animal family, it has one same feature, facing death, every second and every day.</p>

<p>As you know, Everyone has its limited life.</p>

<p>In the limited life, the experience may be colorful and wonderful. 
Or maybe the opposite with bad luck.</p>

<p>So there is a proverb said, life is struggle.
espcially, in China.</p>

<h3 id="when-boy">When boy</h3>

<p>When I am a little boy, I always had lots of complain about my parents.
The topics, which makes me unhappy, are lifestyle and the dealing skill…</p>

<p>Every time conplain happened, Dad told me,</p>

<blockquote class="information">
  <p>When you are old enough, having your children, then you can understand us more.</p>
</blockquote>

<p>At the moment, I did not understand it really.</p>

<h3 id="now">Now</h3>

<p>After ten years, more or less, a child come to my life.</p>

<p>More than half a year passed, suddenly, I got it.</p>

<p>What parents spend on their child, is priceless.</p>

<p>Time and Money, is too much, which is uncountable.</p>

<h3 id="what-we-faced-are-facing-and-will">What we faced, are facing and will</h3>

<p>When we are bobies, we are dangerous because of bad milk.</p>

<p>When we are children and young, we have to study hard to learn something. It’s hard.</p>

<p>When we are grown, work is necessary, which is hard, too.</p>

<p>When we are old, we have to do sth for our children,( like our parents, now )</p>

<p>When we are older, death is welcoming us…</p>

<h3 id="why">Why</h3>

<p>We are dying every day.</p>

<p>The resource in the world is limited…</p>

<p>It’s impossble for humans to share that equally</p>

<p>So we have to struggle for that…and So ….</p>

</div>
  
  

<br>
<a href="/blog/2013/03/24/life-in-china/#disqus_thread">Comments</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/10/air-cleaner-and-english-study/">Air Cleaner and English Study</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-10T00:28:00+08:00" pubdate data-updated="true">Mar 10<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/10/air-cleaner-and-english-study/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here are two interesting stories.</p>

<p>As you know, Peking is a great city, well-known,as big building, huge population, especially the PM2.5 .
So we decided to buy an air-cleaner.
After considering the brand, the work model of air-cleaning, our choice is the SHARP.
Amazon is my fav E-Commerce platform, we bought gift cards on taobao, then ordered the type.</p>

<p>When the machine is sent home by the Express delivery man, we decided to use it immediately.
Everything is fine, until a month goes away.</p>

<p>Yep, you know, the air cleaner should be cleaned every month.
(Some part can not cleaned and it’s disposible)
When I open the machine, I am shocked.</p>

<p>The three layer of the air-filter is wrapped by the plastics.
All of them!!!
Unbelievable!!!</p>

<p>That means we just open it for one month, just the status is open. 
It does not work effectively.
Maybe that’s the reason that the water goes very slowly.
(the air-cleaner have a function: air-humidifying)</p>

<p>The another story is about English study.</p>

<p>Every night, when my baby don’t wanna go to sleep, I will turn on the radio, choose the CNN channel.
Then both She and I will have a good night very soon.</p>

</div>
  
  

<br>
<a href="/blog/2013/03/10/air-cleaner-and-english-study/#disqus_thread">Comments</a>

    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/09/machine-learning-ep2/">Machine Learning Ep2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-09T22:56:00+08:00" pubdate data-updated="true">Mar 9<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/09/machine-learning-ep2/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
  <li>
    <h4 id="discriminative-learning-algorithm">Discriminative learning algorithm</h4>
  </li>
</ul>

<p>learn 
$$
P(y|x)
$$
or</p>

<script type="math/tex; mode=display"> 
h_{\theta}(x) \in \left \{ 0,1 \right \}
</script>

<p>directly</p>

<ul>
  <li>
    <h4 id="generative-learning-algorithm">Generative learning algorithm</h4>
  </li>
</ul>

<p>learn
P(x|y)</p>

<p>then
P(y)</p>

<p>such as Native Bayes</p>

<ul>
  <li>
    <h4 id="laplace-smoothing">Laplace smoothing</h4>
  </li>
</ul>

<p>A/B</p>

<p>==&gt;</p>

<p>(A+1)/(B+1)</p>

</div>
  
  

<br>
<a href="/blog/2013/03/09/machine-learning-ep2/#disqus_thread">Comments</a>

    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <iframe width="100%" height="320" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=320&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=1&isFans=1&uid=1771027825&verifier=f729d6d3&dpc=1"></iframe>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/10/02/workflow-engine-in-python/">Workflow Engine in Python</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/02/the-key-technologies-in-simple-xiangqi-engine-maxqi/">The Key Technologies in Simple XiangQi Engine MaxQi</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/23/something-about-chess-series-with-ai/">Something about Chess series with AI</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/23/database-overview/">Database Overview</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/21/something-interesting-about-ai/">Something Interesting about AI</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/android' style='font-size: 120.0%'>Android(1)</a> <a href='/blog/categories/babylife' style='font-size: 160.0%'>BabyLife(3)</a> <a href='/blog/categories/github' style='font-size: 120.0%'>Github(1)</a> <a href='/blog/categories/machinelearning' style='font-size: 160.0%'>MachineLearning(3)</a> <a href='/blog/categories/techchangeworld' style='font-size: 160.0%'>TechChangeWorld(3)</a> <a href='/blog/categories/techspark' style='font-size: 160.0%'>TechSpark(3)</a> <a href='/blog/categories/tools' style='font-size: 160.0%'>Tools(3)</a> </span>
</section>
<section>
  <h1>Categories</h1>
  <input class="search" type="text" name="filter_tags" results="0" placeholder="Filter Tags ..."/>
  <script type="text/javascript">
    $('input[name=filter_tags]').keyup(function(e){
      var val = $(this).val();
      if (/^\s*$/.test(val) || e.keyCode == 27) { // 27 is 'esc'
        $('#category-list li').show();
        $(this).val('');
        return;
      }
      var pattern = new RegExp(val, 'i');
      $('#category-list li').each(function(){
        $(this)[pattern.test($(this).find('a').text()) ? 'show' : 'hide']();
      });
    });
  </script>
    <ul id="category-list"><li><a href='/blog/categories/android'>Android (1)</a></li><li><a href='/blog/categories/babylife'>BabyLife (3)</a></li><li><a href='/blog/categories/github'>Github (1)</a></li><li><a href='/blog/categories/machinelearning'>MachineLearning (3)</a></li><li><a href='/blog/categories/techchangeworld'>TechChangeWorld (3)</a></li><li><a href='/blog/categories/techspark'>TechSpark (3)</a></li><li><a href='/blog/categories/tools'>Tools (3)</a></li></ul>
</section>






  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Arek.Yao -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'arekyao';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





  <script type="text/javascript">
    var wumiiPermaLink = ""; //
    var wumiiTitle = ""; //
    var wumiiTags = ""; //"1,2"
    var wumiiSitePrefix = "http://arekyao.github.com/";
    var wumiiParams = "&num=5&mode=3&pf=JAVASCRIPT";
</script>
<script type="text/javascript" src="http://widget.wumii.com/ext/relatedItemsWidget"></script>
<a href="http://www.wumii.com/widget/relatedItems" style="border:0;">
<img src="http://static.wumii.cn/images/pixel.png" alt="" style="border:0;padding:0;margin:0;" />
</a>
  <meta name="baidu-site-verification" content="QSLeJw3wwyA8dGHl" />
  <script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F6b519082c0cda60aab2be100c6319f3e' type='text/javascript'%3E%3C/script%3E"));
  </script>
</body>
</html>
